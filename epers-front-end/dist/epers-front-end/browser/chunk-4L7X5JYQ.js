import{a as Fe}from"./chunk-WAEHDGGY.js";import{a as Ee}from"./chunk-ZLYAADV6.js";import{a as ne}from"./chunk-GP76AYW4.js";import{h as ie,j as nt,k as at}from"./chunk-7HPXOHU7.js";import{a as ee,b as vt}from"./chunk-NC7IXFJV.js";import{$a as G,Ab as xe,Cb as pt,Db as ut,F as l,Ga as Se,Ha as it,I as h,Ia as z,J as y,Ja as rt,K as ge,Ka as Oe,L as g,La as B,Na as Le,Nb as bt,O as m,Oa as w,Q as te,Qa as V,Ra as L,S as i,T as t,Ta as H,U as b,V as he,W as fe,X as S,Ya as ot,Z as f,Za as ae,_ as v,_a as q,a as Qe,ab as J,b as Xe,bb as Y,cb as K,da as D,db as lt,ea as r,eb as Q,f as Be,fa as _,fb as X,g as E,ga as x,gb as Z,ha as F,hb as Pe,ia as O,ja as P,ka as I,la as W,m as Ze,ma as R,na as N,o as pe,oa as j,p as ue,qa as et,r as be,ra as M,rb as st,sa as T,sb as re,ta as U,tb as ct,u as $e,ub as mt,v as p,vb as $,w as u,wb as Ie,xa as tt,xb as Ce,y as ve,ya as _e,zb as dt}from"./chunk-5G5VBFYZ.js";var A=(()=>{class s{constructor(e){this.httpClient=e,this.baseUrl=Se.baseUrl,this.tableFiltersSubject=new Be({filter:"",filterFirma:null,currentPage:1,itemsPerPage:10}),this.obiectiveDisplayModelSubject=new Be(null),this.tableFiltersObs$=this.tableFiltersSubject.asObservable(),this.obiectiveDisplayModelObs$=this.obiectiveDisplayModelSubject.asObservable()}getListaSubalterni(e,n,o,c){let d=JSON.parse(localStorage.getItem("user")).matricola,me=JSON.parse(localStorage.getItem("user"))?.idFirma,de=JSON.parse(localStorage.getItem("user"))?.idRol,C=new tt;C=C.append("currentPage",e),C=C.append("itemsPerPage",n),C=C.append("idRol",de||""),C=C.append("idFirmaLoggedInUser",me||""),C=C.append("filter",o||""),C=C.append("filterFirma",c||""),C=C.append("matricolaLoggedInUser",d||""),this.tableFiltersSubject.next({filter:o,filterFirma:c,currentPage:e,itemsPerPage:n}),this.httpClient.get(this.baseUrl+"/Obiective/listaSubalterni",{params:C}).pipe(Ze(Ot=>{this.obiectiveDisplayModelSubject.next(Ot)})).subscribe()}getObFromNomOb(e){return this.httpClient.get(this.baseUrl+"/Obiective/nomObiectiv/"+e)}setareObiectiv(e,n){return this.httpClient.post(this.baseUrl+"/Obiective/setareObiective",e,{params:{idAngajatiSelectati:n}})}getObiectiveActuale(e,n,o,c){return this.httpClient.get(this.baseUrl+"/Obiective/actuale",{params:{idAngajat:e,currentPage:n,itemsPerPage:o,filter:c}})}getIstoricObiective(e,n,o,c){return this.httpClient.get(this.baseUrl+"/Obiective/istoric",{params:{idAngajat:e,currentPage:n,itemsPerPage:o,filter:c}})}evaluareObiective(e){return this.httpClient.put(this.baseUrl+"/Obiective/evaluareObiective",e)}static{this.\u0275fac=function(n){return new(n||s)(be(_e))}}static{this.\u0275prov=pe({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();var It=s=>["/obiective/actuale",s],Ct=s=>["/obiective/istoric",s],xt=s=>["/obiective/setareObiective",s],Ft=s=>["/obiective/evaluare",s];function Et(s,a){if(s&1){let e=S();i(0,"table-header",9),f("nextPage",function(o){p(e);let c=v();return u(c.nextPage(o))})("previousPage",function(o){p(e);let c=v();return u(c.previousPage(o))})("lastPage",function(o){p(e);let c=v();return u(c.lastPage(o))})("selectItemsPerPage",function(o){p(e);let c=v();return u(c.changeItemsPerPage(o))})("serachFilter",function(o){p(e);let c=v();return u(c.filter(o))})("serachIdDDFilter",function(o){p(e);let c=v();return u(c.filterFirma(o))}),t()}if(s&2){let e=v();m("currentPage",e.currentPage)("pages",e.pages)("itemsPerPage",e.itemsPerPage)("searchCriteria",e.filtru?e.filtru:"Nume, Prenume, Matricola")("ddFilterList",e.ddFirme)("ddFilterVisible",!0)}}function yt(s,a){if(s&1){let e=S();i(0,"table-header",10),f("nextPage",function(o){p(e);let c=v();return u(c.nextPage(o))})("previousPage",function(o){p(e);let c=v();return u(c.previousPage(o))})("lastPage",function(o){p(e);let c=v();return u(c.lastPage(o))})("selectItemsPerPage",function(o){p(e);let c=v();return u(c.changeItemsPerPage(o))})("serachFilter",function(o){p(e);let c=v();return u(c.filter(o))}),t()}if(s&2){let e=v();m("currentPage",e.currentPage)("pages",e.pages)("itemsPerPage",e.itemsPerPage)("searchCriteria",e.filtru?e.filtru:"Nume, Prenume, Matricola")}}function Mt(s,a){if(s&1&&(i(0,"tr")(1,"td"),r(2),t(),i(3,"td"),r(4),t(),i(5,"td"),r(6),t(),i(7,"td"),r(8),t(),i(9,"td")(10,"div",11)(11,"button",12),b(12,"mat-icon",13),r(13," Actuale "),t()()(),i(14,"td")(15,"div",11)(16,"button",14),b(17,"mat-icon",15),r(18," Istoric "),t()()(),i(19,"td")(20,"div",11)(21,"button",16),b(22,"mat-icon",17),r(23," Seta\u021Bi "),t()()(),i(24,"td")(25,"div",11)(26,"button",16),b(27,"mat-icon",17),r(28," Evaluare "),t()()()()),s&2){let e=a.$implicit;l(2),_(e.numePrenume),l(2),_(e.matricolaAngajat),l(2),_(e.postAngajat),l(2),_(e.cor),l(3),m("routerLink",R(8,It,e.idAngajat)),l(5),m("routerLink",R(10,Ct,e.idAngajat)),l(5),m("routerLink",R(12,xt,e.idAngajat)),l(5),m("routerLink",R(14,Ft,e.idAngajat))}}var ye=class ke{constructor(a,e,n){this.obService=a,this.firmeService=e,this.toastr=n,this.pages=0,this.currentPage=1,this.itemsPerPage=10,this.filtruIdFirma=null,this.filtru="",this.idFirmaLoggedInUser=JSON.parse(localStorage.getItem("user"))?.idFirma,this.getDDFirme(),this.tableFiltersSub=this.obService.tableFiltersObs$.subscribe(o=>{this.filtru=o?.filter,this.currentPage=o?.currentPage,this.itemsPerPage=o?.itemsPerPage}),this.getListaSubalterni(this.currentPage,this.itemsPerPage,this.filtru,this.filtruIdFirma)}getDDFirme(){this.firmeSub=this.firmeService.firmeSelections$.subscribe(a=>{this.ddFirme=a})}nextPage(a){this.getListaSubalterni(a,this.itemsPerPage,this.filtru,this.filtruIdFirma)}previousPage(a){this.getListaSubalterni(a,this.itemsPerPage,this.filtru,this.filtruIdFirma)}lastPage(a){this.getListaSubalterni(a,this.itemsPerPage,this.filtru,this.filtruIdFirma)}changeItemsPerPage(a){this.currentPage=1,this.itemsPerPage=a,this.getListaSubalterni(this.currentPage,this.itemsPerPage,this.filtru,this.filtruIdFirma)}filter(a){this.filtru=a,this.currentPage=1,this.getListaSubalterni(this.currentPage,this.itemsPerPage,this.filtru,this.filtruIdFirma)}filterFirma(a){this.filtruIdFirma=a,this.currentPage=1,this.pages=0,this.getListaSubalterni(this.currentPage,this.itemsPerPage,this.filtru,this.filtruIdFirma)}getListaSubalterni(a,e,n,o){this.obService.getListaSubalterni(a,e,n,o),this.listSubalterniSub=this.obService.obiectiveDisplayModelObs$.subscribe({next:c=>{this.listaSubalterni=c?.listaSubalterni,this.pages=c?.pages,this.currentPage=c?.currentPage},error:c=>{this.toastr.error(`Lista subalternilor nu a putut fi preluat\u0103!, ${c.message}`,"Eroare!")}})}static{this.\u0275fac=function(e){return new(e||ke)(h(A),h(at),h(ie))}}static{this.\u0275cmp=y({type:ke,selectors:[["lista-subalterni-ob"]],standalone:!1,decls:29,vars:3,consts:[[1,"row"],[1,"col-12","text-center","p-4"],[1,"row","p-2","border-rounded"],["ddFilterCriteria","Firma",3,"currentPage","pages","itemsPerPage","searchCriteria","ddFilterList","ddFilterVisible","nextPage","previousPage","lastPage","selectItemsPerPage","serachFilter","serachIdDDFilter",4,"ngIf"],[3,"currentPage","pages","itemsPerPage","searchCriteria","nextPage","previousPage","lastPage","selectItemsPerPage","serachFilter",4,"ngIf"],[1,"table","p-3","table-striped","table-bordered"],[1,"table-header"],[1,"table-info"],[4,"ngFor","ngForOf"],["ddFilterCriteria","Firma",3,"nextPage","previousPage","lastPage","selectItemsPerPage","serachFilter","serachIdDDFilter","currentPage","pages","itemsPerPage","searchCriteria","ddFilterList","ddFilterVisible"],[3,"nextPage","previousPage","lastPage","selectItemsPerPage","serachFilter","currentPage","pages","itemsPerPage","searchCriteria"],[1,"text-center"],["type","button","mat-stroked-button","","color","accent",3,"routerLink"],["color","basic","fontIcon","access_time"],["type","button","mat-stroked-button","","color","primary",3,"routerLink"],["color","basic","fontIcon","history"],["type","button","mat-raised-button","","color","primary",3,"routerLink"],["color","basic","fontIcon","edit"]],template:function(e,n){e&1&&(i(0,"div",0)(1,"div",1)(2,"h3"),r(3,"List\u0103 Subalterni Obiective"),t()()(),i(4,"div",2),b(5,"router-outlet"),g(6,Et,1,6,"table-header",3)(7,yt,1,4,"table-header",4),i(8,"table",5)(9,"thead",6)(10,"tr",7)(11,"th"),r(12,"Nume \u0219i prenume"),t(),i(13,"th"),r(14,"Matricol\u0103 angajat"),t(),i(15,"th"),r(16,"Post angajat"),t(),i(17,"th"),r(18,"COR angajat"),t(),i(19,"th"),r(20,"Vizualizare obiective curente"),t(),i(21,"th"),r(22,"Vizualizare istoric obiective"),t(),i(23,"th"),r(24,"Setare obiective individuale"),t(),i(25,"th"),r(26,"Evaluare Obiective"),t()()(),i(27,"tbody"),g(28,Mt,29,16,"tr",8),t()()()),e&2&&(l(6),m("ngIf",!n.idFirmaLoggedInUser),l(),m("ngIf",n.idFirmaLoggedInUser),l(21),m("ngForOf",n.listaSubalterni))},dependencies:[ee,M,T,V,L,rt,B],encapsulation:2})}};ye=E([w({checkProperties:!0})],ye);var Te=(()=>{class s{constructor(e){this.httpClient=e,this.baseUrl=Se.baseUrl}sendEmailObiectiveSelectate(e){this.httpClient.get(this.baseUrl+"/EmailObiective/obiectiveSetate?idAngajat="+e).subscribe()}sendEmailObiectiveEvaluate(e){this.httpClient.get(this.baseUrl+"/EmailObiective/obiectiveEvaluate?idAngajat="+e).subscribe()}static{this.\u0275fac=function(n){return new(n||s)(be(_e))}}static{this.\u0275prov=pe({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();function Tt(s,a){s&1&&(i(0,"span",44),r(1,"C\xE2mpul este obligatoriu!"),t())}function wt(s,a){if(s&1){let e=S();i(0,"div",41)(1,"div",23)(2,"div",15)(3,"label",42),r(4,"Denumire"),t()(),i(5,"div",24)(6,"textarea",43,9),I("ngModelChange",function(o){p(e);let c=v();return P(c.obiectivTemplate.denumire,o)||(c.obiectivTemplate.denumire=o),u(o)}),t(),g(8,Tt,2,0,"span",20),t()()()}if(s&2){let e=D(7),n=v();l(6),te("invalid",(e.touched||e.dirty)&&e.invalid),O("ngModel",n.obiectivTemplate.denumire),l(2),m("ngIf",(e.touched||e.dirty)&&e.invalid)}}function Vt(s,a){s&1&&(i(0,"span",44),r(1,"C\xE2mpul este obligatoriu!"),t())}function At(s,a){if(s&1&&(i(0,"option",47),r(1),t()),s&2){let e=a.$implicit;m("value",e.Valoare),l(),x("",e.Valoare," ")}}function Dt(s,a){s&1&&(i(0,"span",44),r(1,"C\xE2mpul este obligatoriu!"),t())}function Nt(s,a){if(s&1){let e=S();i(0,"div",15)(1,"select",45,10),I("ngModelChange",function(o){p(e);let c=v();return P(c.obiectivTemplate.frecventa,o)||(c.obiectivTemplate.frecventa=o),u(o)}),g(3,At,2,2,"option",46),t(),g(4,Dt,2,0,"span",20),t()}if(s&2){let e=D(2),n=v();l(),te("invalid",(e.touched||e.dirty)&&e.invalid),O("ngModel",n.obiectivTemplate.frecventa),l(2),m("ngForOf",n.frecventeSelection),l(),m("ngIf",(e.touched||e.dirty)&&e.invalid)}}var we=class We{constructor(a){this.selectionBoxStateService=a,this.addedObTemplate=new ve,this.obiectivTemplate={}}ngOnInit(){this.getFrecventeObSelection()}ngOnChanges(){this.isFrecvAndValIdentic?(this.obiectivTemplate.dataIn=this.dataInceputIdentica,this.obiectivTemplate.frecventa=this.frecventaIdentica):(this.obiectivTemplate.dataIn=null,this.obiectivTemplate.frecventa=null),this.obiectivTemplate.tip=this.tipObiectiv}onAddObiectiv(){this.addedObTemplate.emit(this.obiectivTemplate)}getFrecventeObSelection(){this.frecventeSub=this.selectionBoxStateService.selections$.subscribe(a=>{this.frecventeSelection=a?.FrecventaObiectiveSelection})}static{this.\u0275fac=function(e){return new(e||We)(h(ne))}}static{this.\u0275cmp=y({type:We,selectors:[["obiectiv-input"]],inputs:{isFrecvAndValIdentic:"isFrecvAndValIdentic",dataInceputIdentica:"dataInceputIdentica",frecventaIdentica:"frecventaIdentica",tipObiectiv:"tipObiectiv"},outputs:{addedObTemplate:"addedObTemplate"},standalone:!1,features:[$e],decls:85,vars:14,consts:[["addObiectivTemplate","ngForm"],["dataIn","ngModel"],["valMin","ngModel"],["valTarget","ngModel"],["valMax","ngModel"],["isFaraProcent","ngModel"],["bonusMin","ngModel"],["bonusTarget","ngModel"],["bonusMax","ngModel"],["denumire","ngModel"],["frecventa","ngModel"],[1,"container","border","rounded",2,"background-color","rgb(244, 244, 244)"],["class","col-12 pt-2",4,"ngIf"],[1,"col-12","pt-2","pb-2"],[1,"row","pt-4"],[1,"col-3"],["for","obInp-dataIn",1,"required-label"],["for","obInp-frecventa",1,"required-label"],[1,"row","pt-2"],["data-provide","datepicker","type","date","name","dataIn","id","obInp-dataIn","required","",1,"form-control","form-control-sm","date",3,"ngModelChange","ngModel"],["class","help-block help-block-danger",4,"ngIf"],["class","col-3",4,"ngIf"],[1,"row"],[1,"form-group"],[1,"col-12"],["for","obInp-valMin"],["type","number","id","obInp-valMin","name","valMin",1,"form-control","form-control-sm",3,"ngModelChange","ngModel"],["for","obInp-valTarget"],["type","number","id","obInp-valTarget","name","valTarget",1,"form-control","form-control-sm",3,"ngModelChange","ngModel"],["for","obInp-valMax"],["type","number","id","obInp-valMax","name","valMax",1,"form-control","form-control-sm",3,"ngModelChange","ngModel"],["for","obInp-isFaraProcent"],["type","checkbox","name","isFaraProcent","id","obInp-isFaraProcent",1,"form-check-input","big-checkbox",3,"ngModelChange","ngModel"],["for","obInp-bonusMin"],["type","number","id","obInp-bonusMin","name","bonusMin","placeholder","RON",1,"form-control","form-control-sm",3,"ngModelChange","ngModel"],["for","obInp-bonusTarget"],["type","number","id","obInp-bonusTarget","name","bonusTarget","placeholder","RON",1,"form-control","form-control-sm",3,"ngModelChange","ngModel"],["for","obInp-bonusMax"],["type","number","id","obInp-bonusMax","name","bonusMax","placeholder","RON",1,"form-control","form-control-sm",3,"ngModelChange","ngModel"],["mat-raised-button","","color","primary","type","button",3,"click","disabled"],["fontIcon","add"],[1,"col-12","pt-2"],["for","obInp-denumire",1,"required-label"],["type","text","rows","2","id","obInp-denumire","name","denumire","required","",1,"form-control","form-control-sm",3,"ngModelChange","ngModel"],[1,"help-block","help-block-danger"],["id","obInp-frecventa","name","frecventa","required","",1,"form-select","form-select-sm",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,n){if(e&1){let o=S();i(0,"form",null,0)(2,"div",11),g(3,wt,9,4,"div",12),i(4,"div",13)(5,"div",14)(6,"div",15)(7,"mat-label",16),r(8,"Valabil din:"),t()(),i(9,"div",15)(10,"mat-label",17),r(11,"Frecven\u021Ba:"),t()()(),i(12,"div",18)(13,"div",15)(14,"input",19,1),I("ngModelChange",function(d){return p(o),P(n.obiectivTemplate.dataIn,d)||(n.obiectivTemplate.dataIn=d),u(d)}),t(),g(16,Vt,2,0,"span",20),t(),g(17,Nt,5,5,"div",21),t()(),i(18,"div",13)(19,"div",22)(20,"div",15)(21,"div",23)(22,"div",24)(23,"label",25),r(24,"Val. Min."),t()(),i(25,"div",24)(26,"input",26,2),I("ngModelChange",function(d){return p(o),P(n.obiectivTemplate.valMin,d)||(n.obiectivTemplate.valMin=d),u(d)}),t()()()(),i(28,"div",15)(29,"div",23)(30,"div",24)(31,"label",27),r(32,"Val. Target"),t()(),i(33,"div",24)(34,"input",28,3),I("ngModelChange",function(d){return p(o),P(n.obiectivTemplate.valTarget,d)||(n.obiectivTemplate.valTarget=d),u(d)}),t()()()(),i(36,"div",15)(37,"div",23)(38,"div",24)(39,"label",29),r(40,"Val. Max."),t()(),i(41,"div",24)(42,"input",30,4),I("ngModelChange",function(d){return p(o),P(n.obiectivTemplate.valMax,d)||(n.obiectivTemplate.valMax=d),u(d)}),t()()()(),i(44,"div",15)(45,"div",23)(46,"div",24)(47,"label",31),r(48,"Obiectiv Calitativ"),t()(),i(49,"div",24)(50,"input",32,5),I("ngModelChange",function(d){return p(o),P(n.obiectivTemplate.isFaraProcent,d)||(n.obiectivTemplate.isFaraProcent=d),u(d)}),t()()()()(),i(52,"div",18)(53,"div",15)(54,"div",23)(55,"div",24)(56,"label",33),r(57,"Bonus. Min."),t()(),i(58,"div",24)(59,"input",34,6),I("ngModelChange",function(d){return p(o),P(n.obiectivTemplate.bonusMin,d)||(n.obiectivTemplate.bonusMin=d),u(d)}),t()()()(),i(61,"div",15)(62,"div",23)(63,"div",24)(64,"label",35),r(65,"Bonus Target"),t()(),i(66,"div",24)(67,"input",36,7),I("ngModelChange",function(d){return p(o),P(n.obiectivTemplate.bonusTarget,d)||(n.obiectivTemplate.bonusTarget=d),u(d)}),t()()()(),i(69,"div",15)(70,"div",23)(71,"div",24)(72,"label",37),r(73,"Bonus Max."),t()(),i(74,"div",24)(75,"input",38,8),I("ngModelChange",function(d){return p(o),P(n.obiectivTemplate.bonusMax,d)||(n.obiectivTemplate.bonusMax=d),u(d)}),t()()()(),i(77,"div",15)(78,"div",23)(79,"div",24),b(80,"label"),t(),i(81,"div",24)(82,"button",39),f("click",function(){return p(o),u(n.onAddObiectiv())}),b(83,"mat-icon",40),r(84,"Ad\u0103uga\u021Bi "),t()()()()()()()()}if(e&2){let o=D(1),c=D(15);l(3),m("ngIf",n.obiectivTemplate),l(11),te("invalid",(c.touched||c.dirty)&&c.invalid),O("ngModel",n.obiectivTemplate.dataIn),l(2),m("ngIf",(c.touched||c.dirty)&&c.invalid),l(),m("ngIf",n.frecventeSelection),l(9),O("ngModel",n.obiectivTemplate.valMin),l(8),O("ngModel",n.obiectivTemplate.valTarget),l(8),O("ngModel",n.obiectivTemplate.valMax),l(8),O("ngModel",n.obiectivTemplate.isFaraProcent),l(9),O("ngModel",n.obiectivTemplate.bonusMin),l(8),O("ngModel",n.obiectivTemplate.bonusTarget),l(8),O("ngModel",n.obiectivTemplate.bonusMax),l(7),m("disabled",!o.valid)}},dependencies:[M,T,K,X,Z,ae,lt,ot,Q,q,G,Pe,Y,J,V,L,re],encapsulation:2})}};we=E([w({checkProperties:!0})],we);function Bt(s,a){if(s&1&&(i(0,"option",17),r(1),t()),s&2){let e=a.$implicit;m("value",e.Id),l(),x("",e.Text," ")}}function Lt(s,a){s&1&&(i(0,"span",18),r(1,"C\xE2mpul este obligatoriu!"),t())}function kt(s,a){if(s&1&&(i(0,"option",17),r(1),t()),s&2){let e=a.$implicit;m("value",e.Valoare),l(),x("",e.Valoare," ")}}function Rt(s,a){s&1&&(i(0,"span",18),r(1,"C\xE2mpul este obligatoriu!"),t())}function Wt(s,a){if(s&1){let e=S();i(0,"div",5)(1,"select",19,2),I("ngModelChange",function(o){p(e);let c=v();return P(c.selectedObNomFrecventa,o)||(c.selectedObNomFrecventa=o),u(o)}),g(3,kt,2,2,"option",9),t(),g(4,Rt,2,0,"span",12),t()}if(s&2){let e=D(2),n=v();l(),te("invalid",(e.touched||e.dirty)&&e.invalid),O("ngModel",n.selectedObNomFrecventa),l(2),m("ngForOf",n.frecventeSelection),l(),m("ngIf",(e.touched||e.dirty)&&e.invalid)}}function Ut(s,a){if(s&1&&(i(0,"div",20)(1,"div",4)(2,"div",7)(3,"h6"),r(4,"Descriere Obiectiv ales din Nomenclator"),t()()(),b(5,"hr"),i(6,"div",6)(7,"div",7)(8,"label",21),r(9,"Denumire:"),t(),r(10),t()(),b(11,"hr"),i(12,"div",6)(13,"div",22)(14,"label",21),r(15,"Val. Min.:"),t(),r(16),t(),i(17,"div",22)(18,"label",21),r(19,"Val. Target:"),t(),r(20),t(),i(21,"div",22)(22,"label",21),r(23,"Val. Max.:"),t(),r(24),t()(),i(25,"div",6)(26,"div",22)(27,"label",21),r(28,"Bonus Min.:"),t(),r(29),t(),i(30,"div",22)(31,"label",21),r(32,"Bonus Target:"),t(),r(33),t(),i(34,"div",22)(35,"label",21),r(36,"Bonus Max.:"),t(),r(37),t()(),i(38,"div",6)(39,"div",22)(40,"label",21),r(41,"Frecven\u021Ba:"),t(),r(42),t(),i(43,"div",22)(44,"label",21),r(45,"Obiectiv Calitativ:"),t(),r(46),t()()()),s&2){let e=v();l(10),x(" ",e.obTemplateFromNom.denumire," "),l(6),x(" ",e.obTemplateFromNom.valMin," "),l(4),x(" ",e.obTemplateFromNom.valTarget," "),l(4),x(" ",e.obTemplateFromNom.valMax," "),l(5),x(" ",e.obTemplateFromNom.bonusMin," "),l(4),x(" ",e.obTemplateFromNom.bonusTarget," "),l(4),x(" ",e.obTemplateFromNom.bonusMax," "),l(5),x(" ",e.obTemplateFromNom.frecventa," "),l(4),x(" ",e.obTemplateFromNom.isFaraProcent?"DA":"NU"," ")}}var Ve=class ze{constructor(a,e,n){this.ddStateService=a,this.selectionBoxStateService=e,this.obService=n,this.addObFromNomenclator=new ve,this.selectedObNomFrecventa="",this.frecventeSub=this.selectionBoxStateService.selections$.subscribe(o=>{this.frecventeSelection=o?.FrecventaObiectiveSelection})}ngOnInit(){this.ddSub=this.ddStateService.appDropdownsSubject$.subscribe(a=>{this.idFirma?this.ddObiective=a?.DdObiective.filter(e=>e.IdFirma===this.idFirma):this.ddObiective=a?.DdObiective})}onObFromNomChange(){this.obServiceSub=this.obService.getObFromNomOb(this.selectedObFromNomId).subscribe(a=>{this.obTemplateFromNom=a,this.obTemplateFromNom.frecventa=this.frecventeSelection?.find(e=>e.Id.toString()===a.frecventa)?.Valoare,this.selectedObNomFrecventa=a.frecventa})}onAddObiectivFromNom(){this.obTemplateFromNom.frecventa=this.selectedObNomFrecventa,this.obTemplateFromNom.dataIn=this.selectedObNomDataDin,this.addObFromNomenclator.emit(this.obTemplateFromNom)}static{this.\u0275fac=function(e){return new(e||ze)(h(nt),h(ne),h(A))}}static{this.\u0275cmp=y({type:ze,selectors:[["obiectiv-from-dd"]],inputs:{idFirma:"idFirma"},outputs:{addObFromNomenclator:"addObFromNomenclator"},standalone:!1,decls:30,vars:9,consts:[["obTemplateFromNomFrom","ngForm"],["nomObDatadin","ngModel"],["nomObFrecventa","ngModel"],[3,"ngSubmit"],[1,"row","pt-2"],[1,"col-6"],[1,"row"],[1,"col-12"],["id","selectedObFromNomId","name","selectedObFromNomId",1,"form-select",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"required-label"],["for","nomObDatadin","data-provide","datepicker","type","date","name","nomObDatadin","id","nomObDatadin","required","",1,"form-control","date",3,"ngModelChange","ngModel"],["class","help-block help-block-danger",4,"ngIf"],["class","col-6",4,"ngIf"],["mat-raised-button","","color","primary","type","submit",1,"form-control",3,"disabled"],["fontIcon","add"],["class","col-6 container border rounded",4,"ngIf"],[3,"value"],[1,"help-block","help-block-danger"],["id","nomObFrecventa","name","selectedObNomFrecventa","required","",1,"form-select",3,"ngModelChange","ngModel"],[1,"col-6","container","border","rounded"],[1,"label-bold-sm"],[1,"col-4"]],template:function(e,n){if(e&1){let o=S();i(0,"form",3,0),f("ngSubmit",function(){return p(o),u(n.onAddObiectivFromNom())}),i(2,"div",4)(3,"div",5)(4,"div",6)(5,"div",7)(6,"h6"),r(7,"Alege\u021Bi din nomenclatorul de obiective"),t()(),i(8,"div",7)(9,"select",8),I("ngModelChange",function(d){return p(o),P(n.selectedObFromNomId,d)||(n.selectedObFromNomId=d),u(d)}),f("ngModelChange",function(){return p(o),u(n.onObFromNomChange())}),g(10,Bt,2,2,"option",9),t()()(),i(11,"div",4)(12,"div",5)(13,"mat-label",10),r(14,"Valabil din:"),t()(),i(15,"div",5)(16,"mat-label",10),r(17,"Frecven\u021Ba:"),t()()(),i(18,"div",6)(19,"div",5)(20,"input",11,1),I("ngModelChange",function(d){return p(o),P(n.selectedObNomDataDin,d)||(n.selectedObNomDataDin=d),u(d)}),t(),g(22,Lt,2,0,"span",12),t(),g(23,Wt,5,5,"div",13),t(),i(24,"div",4)(25,"div",7)(26,"button",14),b(27,"mat-icon",15),r(28,"Ad\u0103uga\u021Bi "),t()()()(),g(29,Ut,47,9,"div",16),t()()}if(e&2){let o=D(1),c=D(21);l(9),O("ngModel",n.selectedObFromNomId),l(),m("ngForOf",n.ddObiective),l(10),te("invalid",(c.touched||c.dirty)&&c.invalid),O("ngModel",n.selectedObNomDataDin),l(2),m("ngIf",(c.touched||c.dirty)&&c.invalid),l(),m("ngIf",n.frecventeSelection),l(3),m("disabled",!o.valid),l(3),m("ngIf",n.obTemplateFromNom)}},dependencies:[M,T,K,X,Z,ae,Q,q,G,Pe,Y,J,V,L,re],encapsulation:2})}};Ve=E([w({checkProperties:!0})],Ve);var He=s=>({selectedTipOb:s}),Gt=()=>["../../listaSubalterni"];function Jt(s,a){s&1&&b(0,"mat-icon",36)}function Yt(s,a){s&1&&b(0,"mat-icon",37)}function Kt(s,a){if(s&1){let e=S();i(0,"tr")(1,"td"),r(2),t(),i(3,"td"),r(4),t(),i(5,"td"),r(6),N(7,"date"),t(),i(8,"td"),r(9),t(),i(10,"td"),r(11),t(),i(12,"td",31),r(13),t(),i(14,"td"),r(15),t(),i(16,"td",32),g(17,Jt,1,0,"mat-icon",33)(18,Yt,1,0,"mat-icon",34),t(),i(19,"td")(20,"table-delete-button",35),f("click",function(){let o=p(e).index,c=v(2);return u(c.removeOb(o))}),t()()()}if(s&2){let e=a.$implicit;l(2),_(e.tip=="I"?"Individual":e.tip=="D"?"Depatamental":"Corporativ"),l(2),_(e.denumire),l(2),_(j(7,12,e.dataIn,"dd/MM/yyyy")),l(3),_(e.frecventa),l(2),F("Val.: ",e.valMin?e.valMin:"-"," | ",e.bonusMin?e.bonusMin:"0"," (RON)"),l(2),F("Val.: ",e.valTarget?e.valTarget:"-"," | ",e.bonusTarget?e.bonusTarget:"0"," (RON)"),l(2),F("Val.: ",e.valMax?e.valMax:"-"," | ",e.bonusMax?e.bonusMax:"0"," (RON)"),l(2),m("ngIf",e.isFaraProcent),l(),m("ngIf",!e.isFaraProcent)}}function Qt(s,a){if(s&1&&(i(0,"div",28)(1,"table",29)(2,"thead",30)(3,"th"),r(4,"Tip"),t(),i(5,"th"),r(6,"Denumire"),t(),i(7,"th"),r(8,"Data \xEEnceput"),t(),i(9,"th"),r(10,"Frecven\u021Ba"),t(),i(11,"th"),r(12,"Val. min. | Bonus min."),t(),i(13,"th"),r(14,"Val. target | Bonus target"),t(),i(15,"th"),r(16,"Val. max. | Bonus max."),t(),i(17,"th"),r(18,"Obiectiv calitativ"),t(),i(19,"th"),r(20,"\u0218terge\u021Bi"),t()(),i(21,"tbody"),g(22,Kt,21,15,"tr",24),t()()()),s&2){let e=v();l(22),m("ngForOf",e.setareOb.obiectivTemplate)}}function Xt(s,a){if(s&1){let e=S();i(0,"button",38),f("click",function(){p(e);let o=v();return u(o.hideAddObFormNom())}),b(1,"mat-icon",39),t()}}function Zt(s,a){if(s&1){let e=S();i(0,"div",40)(1,"obiectiv-from-dd",41),f("addObFromNomenclator",function(o){p(e);let c=v();return u(c.addObiectivTemplateFromNom(o))}),t(),b(2,"div",25),t()}if(s&2){let e=v();l(),m("idFirma",e.idFirma)}}function $t(s,a){if(s&1){let e=S();i(0,"button",38),f("click",function(){p(e);let o=v();return u(o.hideAddObForm())}),b(1,"mat-icon",39),t()}}function ei(s,a){if(s&1){let e=S();i(0,"div",18)(1,"div",19)(2,"div",42)(3,"h6"),r(4,"Frecven\u021B\u0103 \u0219i valabilitate"),t()(),i(5,"div",42)(6,"mat-radio-group",43),I("ngModelChange",function(o){p(e);let c=v();return P(c.isFrecvAndValIdentic,o)||(c.isFrecvAndValIdentic=o),u(o)}),f("ngModelChange",function(){p(e);let o=v();return u(o.flagFrecvAndDataChanged())}),i(7,"mat-radio-button",21),r(8,"identic\u0103"),t(),r(9,"\xA0\xA0\xA0 "),i(10,"mat-radio-button",21),r(11,"diferit\u0103"),t()()(),b(12,"hr"),t(),i(13,"div",23)(14,"obiectiv-input",44),f("addedObTemplate",function(o){p(e);let c=v();return u(c.addObiectivTemplate(o))}),t()()()}if(s&2){let e=v();l(6),O("ngModel",e.isFrecvAndValIdentic),l(),m("value",!0),l(3),m("value",!1),l(4),m("isFrecvAndValIdentic",e.isFrecvAndValIdentic)("dataInceputIdentica",e.selectedDataDin)("frecventaIdentica",e.selectedFrecventa)("tipObiectiv",e.isAddObIndividual?"I":e.isAddObDepartamental?"D":"C")}}function ti(s,a){if(s&1&&(i(0,"option",21),r(1),t()),s&2){let e=a.$implicit;m("value",e.idAngajat),l(),x("",e.numePrenume," ")}}function ii(s,a){if(s&1&&(he(0),i(1,"span",45),r(2),t(),r(3," | "),fe()),s&2){let e=a.$implicit;l(2),_(e.numePrenume)}}var Ae=class qe{constructor(a,e,n,o,c,d,me,de){this.route=a,this.router=e,this.selectionBoxStateService=n,this.obiectiveService=o,this.toastr=c,this.userService=d,this.emailService=me,this.headerService=de,this.isAddObIndividual=!1,this.isAddObDepartamental=!1,this.isAddObCorporariv=!1,this.isFrecvAndValIdentic=!0,this.selectedFrecventa="",this.isAddObFromNomenclator=!1,this.subalterniSelectatiSetareOb=[],this.isSaving=!1,this.setareOb={},this.setareOb.obiectivTemplate=[],this.route.params.subscribe(C=>{this.idAngajat=+C.id})}ngOnInit(){this.userSub=this.userService.get(this.idAngajat).subscribe(a=>{this.idFirma=a?.idFirma}),this.getFrecventeObSelection(),this.initSetObiectivModel(),this.getDropdownSubalterni()}submitForm(){this.isSaving=!0;let a=this.subalterniSelectatiSetareOb.map(e=>e.idAngajat);this.obiectiveService.setareObiectiv(this.setareOb,a).subscribe({next:()=>{this.isSaving=!1,this.toastr.success("Obiectivele au fost salvate cu succes!"),this.emailService.sendEmailObiectiveSelectate(this.idAngajat),setTimeout(()=>{this.router.navigate(["../../listaSubalterni"],{relativeTo:this.route})},500)},error:e=>{this.isSaving=!1,this.toastr.error(e?.error?.message)}})}flagFrecvAndDataChanged(){this.isFrecvAndValIdentic||(this.selectedDataDin=null,this.selectedFrecventa=null)}addObiectivTemplate(a){this.isAddObIndividual=!1,this.isAddObDepartamental=!1,this.isAddObCorporariv=!1,this.isFrecvAndValIdentic?(this.selectedDataDin=a.dataIn,this.selectedFrecventa=a.frecventa):(this.selectedDataDin=null,this.selectedFrecventa=null),this.setareOb.obiectivTemplate.push(a)}addObiectivTemplateFromNom(a){this.setareOb.obiectivTemplate.push(a)}removeOb(a){this.setareOb.obiectivTemplate.splice(a,1)}hideAddObForm(){this.isAddObIndividual=!1,this.isAddObDepartamental=!1,this.isAddObCorporariv=!1}hideAddObFormNom(){this.isAddObFromNomenclator=!1}onAddObFromNom(){this.isAddObFromNomenclator=!0}onSelectSubalt(a){if(a==="none")this.subalterniSelectatiSetareOb=[];else if(a==="all")this.subalterniSelectatiSetareOb=[...this.listaSubalterniDD];else{let e=this.listaSubalterniDD.find(n=>n.idAngajat===+a);this.subalterniSelectatiSetareOb.find(n=>n.idAngajat===e.idAngajat)||this.subalterniSelectatiSetareOb.push(e)}}onAddObIndiv(){this.isAddObIndividual=!0,this.isAddObCorporariv=!1,this.isAddObDepartamental=!1}onAddObDep(){this.isAddObDepartamental=!0,this.isAddObIndividual=!1,this.isAddObCorporariv=!1}onAddObCorp(){this.isAddObCorporariv=!0,this.isAddObIndividual=!1,this.isAddObDepartamental=!1}getDropdownSubalterni(){this.ddSublaterniSub=this.userService.getDropdownSubalterni().subscribe(a=>{this.listaSubalterniDD=a})}getFrecventeObSelection(){this.frecventeSub=this.selectionBoxStateService.selections$.subscribe(a=>{a&&(this.frecventeSelection=a?.FrecventaObiectiveSelection)})}initSetObiectivModel(){this.setareOb.idAngajat=this.idAngajat.toString(),this.headerSub=this.headerService.getHeaderData(this.idAngajat).subscribe(a=>{this.setareOb.idSuperior=a.idSuperior.toString(),this.setareOb.matricolaAngajat=a.matricola,this.setareOb.matricolaSuperior=a.matricolaSef,this.setareOb.idCompartiment=a.idCompartiment,this.setareOb.idPost=a.idPost,this.subalterniSelectatiSetareOb.push({idAngajat:this.idAngajat,matricolaAngajat:a.matricola,numePrenume:a.numePrenume,postAngajat:a.denumirePost,cor:a.cor})})}static{this.\u0275fac=function(e){return new(e||qe)(h(z),h(Oe),h(ne),h(A),h(ie),h(it),h(Te),h(st))}}static{this.\u0275cmp=y({type:qe,selectors:[["setare-obiective"]],standalone:!1,decls:66,vars:23,consts:[["setareObiective","ngForm"],[1,"row"],[1,"col-12","text-center","p-4"],[3,"idAngajat"],[3,"ngSubmit"],[1,"row","pt-1"],[1,"col-12"],["class","row p-2",4,"ngIf"],[1,"row","pl-2"],[1,"col-auto","pt-2","pb-2"],[1,"col-auto"],["type","button","color","primary","mat-mini-fab","",3,"click"],["fontIcon","add"],["type","button","color","basic","mat-mini-fab","",3,"click",4,"ngIf"],["class","row pt-2 pb-4",4,"ngIf"],[1,"col-auto","pt-2","pb-2",3,"ngClass"],["type","button","color","accent","mat-mini-fab","",3,"click"],["class","row pt-2 pb-2",4,"ngIf"],[1,"row","pt-2","pb-2"],[1,"col-4"],["id","obSetListaSubalt","name","listaSubalterniDD",1,"form-select",3,"ngModelChange","ngModel"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"col-8"],[4,"ngFor","ngForOf"],[1,"col-6"],[3,"routerLink"],[3,"disabled"],[1,"row","p-2"],[1,"table","p-3","table-striped","table-bordered"],[1,"table-header"],[1,"bold-font"],[2,"text-align","center"],["color","primary","fontIcon","check",4,"ngIf"],["color","warn","fontIcon","close",4,"ngIf"],[3,"click"],["color","primary","fontIcon","check"],["color","warn","fontIcon","close"],["type","button","color","basic","mat-mini-fab","",3,"click"],["fontIcon","arrow_drop_up"],[1,"row","pt-2","pb-4"],[3,"addObFromNomenclator","idFirma"],[1,"row","pt-2"],["aria-label","Frecven\u021B\u0103 \u0219i valabilitate","name","isFrecvAndValIdentic","color","primary",3,"ngModelChange","ngModel"],[3,"addedObTemplate","isFrecvAndValIdentic","dataInceputIdentica","frecventaIdentica","tipObiectiv"],[1,"medium-text"]],template:function(e,n){if(e&1){let o=S();i(0,"div",1)(1,"div",2)(2,"h3"),r(3,"Setare Obiective Subaltern"),t()()(),b(4,"userdata-header",3),i(5,"form",4,0),f("ngSubmit",function(){return p(o),u(n.submitForm())}),i(7,"div",5)(8,"div",6)(9,"mat-card")(10,"mat-card-content"),g(11,Qt,23,1,"div",7),i(12,"div",8)(13,"div",9)(14,"h5"),r(15,"Alege\u021Bi din obiective predefinite \xEEn nomenclator"),t()(),i(16,"div",10)(17,"button",11),f("click",function(){return p(o),u(n.onAddObFromNom())}),b(18,"mat-icon",12),t()(),g(19,Xt,2,0,"button",13),t(),g(20,Zt,3,1,"div",14),b(21,"hr"),i(22,"div",8)(23,"div",15)(24,"h5"),r(25,"Obiective individuale"),t()(),i(26,"div",10)(27,"button",16),f("click",function(){return p(o),u(n.onAddObIndiv())}),b(28,"mat-icon",12),t()(),i(29,"div",15)(30,"h5"),r(31,"Obiective departamentale"),t()(),i(32,"div",10)(33,"button",16),f("click",function(){return p(o),u(n.onAddObDep())}),b(34,"mat-icon",12),t()(),i(35,"div",15)(36,"h5"),r(37,"Obiective coorporative"),t()(),i(38,"div",10)(39,"button",16),f("click",function(){return p(o),u(n.onAddObCorp())}),b(40,"mat-icon",12),t()(),i(41,"div",10),g(42,$t,2,0,"button",13),t()(),g(43,ei,15,7,"div",17),b(44,"hr"),i(45,"div",18)(46,"div",19)(47,"h5"),r(48,"Seta\u021Bi aceste obiective la to\u021Bi subalternii sau la cei selecta\u021Bi"),t(),i(49,"mat-label"),r(50,"List\u0103 subalterni"),t(),i(51,"select",20),I("ngModelChange",function(d){return p(o),P(n.subalternSelectat,d)||(n.subalternSelectat=d),u(d)}),f("ngModelChange",function(d){return p(o),u(n.onSelectSubalt(d))}),i(52,"option",21),r(53,"To\u021Bi"),t(),g(54,ti,2,2,"option",22),i(55,"option",21),r(56,"Niciunul"),t()()(),i(57,"div",23)(58,"h5"),r(59,"Subalterni selecta\u021Bi: "),t(),g(60,ii,4,1,"ng-container",24),t()()()()()(),i(61,"div",5)(62,"div",25),b(63,"cancel-button",26),t(),i(64,"div",25),b(65,"save-button",27),t()()()}if(e&2){let o=D(6);l(4),m("idAngajat",n.idAngajat),l(7),m("ngIf",n.setareOb.obiectivTemplate&&n.setareOb.obiectivTemplate.length>0),l(8),m("ngIf",n.isAddObFromNomenclator),l(),m("ngIf",n.isAddObFromNomenclator),l(3),m("ngClass",R(16,He,n.isAddObIndividual)),l(6),m("ngClass",R(18,He,n.isAddObDepartamental)),l(6),m("ngClass",R(20,He,n.isAddObCorporariv)),l(7),m("ngIf",n.isAddObIndividual||n.isAddObDepartamental||n.isAddObCorporariv),l(),m("ngIf",n.isAddObIndividual||n.isAddObDepartamental||n.isAddObCorporariv),l(8),O("ngModel",n.subalternSelectat),l(),m("value","all"),l(2),m("ngForOf",n.listaSubalterniDD),l(),m("value","none"),l(5),m("ngForOf",n.subalterniSelectatiSetareOb),l(3),m("routerLink",W(22,Gt)),l(2),m("disabled",!o.valid||n.setareOb.obiectivTemplate&&n.setareOb.obiectivTemplate.length<=0||n.isSaving)}},dependencies:[et,M,T,K,X,Z,Q,q,G,Y,J,V,H,re,ct,mt,pt,ut,$,Ie,Ce,dt,B,we,Ve,U],encapsulation:2})}};Ae=E([w({checkProperties:!0})],Ae);var ri=()=>["../../listaSubalterni"];function oi(s,a){s&1&&(i(0,"button",20),r(1," DA "),t())}function li(s,a){s&1&&(i(0,"button",20),r(1," NU "),t())}function si(s,a){if(s&1&&(i(0,"tr")(1,"td"),r(2),t(),i(3,"td"),r(4),t(),i(5,"td"),r(6),N(7,"date"),t(),i(8,"td"),r(9),t(),i(10,"td"),r(11),N(12,"date"),t(),i(13,"td"),r(14),t(),i(15,"td",17),r(16),t(),i(17,"td"),r(18),t(),i(19,"td",18),g(20,oi,2,0,"button",19)(21,li,2,0,"button",19),t()()),s&2){let e=a.$implicit;l(2),_(e.tip=="I"?"Individual":e.tip=="D"?"Depatamental":"Corporativ"),l(2),_(e.denumire),l(2),_(j(7,13,e.dataIn,"dd/MM/yyyy")),l(3),_(e.frecventa),l(2),_(j(12,16,e.dataSf,"dd/MM/yyyy")),l(3),F("Val.: ",e.valMin?e.valMin:"-"," | ",e.bonusMin?e.bonusMin:"0"," (RON)"),l(2),F("Val.: ",e.valTarget?e.valTarget:"-"," | ",e.bonusTarget?e.bonusTarget:"0"," (RON)"),l(2),F("Val.: ",e.valMax?e.valMax:"-"," | ",e.bonusMax?e.bonusMax:"0"," (RON)"),l(2),m("ngIf",e.isFaraProcent),l(),m("ngIf",!e.isFaraProcent)}}var De=class Je{constructor(a,e,n){this.obService=a,this.pdfService=e,this.route=n,this.obiectiveActuale=[],this.pages=0,this.currentPage=1,this.itemsPerPage=10,this.filtru="",this.obActualePdf=Fe.OBIECTIVEACTUALE}ngOnInit(){this.route.params.subscribe(a=>{this.idAngajat=+a.id,this.getObActive(this.currentPage,this.itemsPerPage,this.filtru)})}nextPage(a){this.getObActive(a,this.itemsPerPage,this.filtru)}previousPage(a){this.getObActive(a,this.itemsPerPage,this.filtru)}lastPage(a){this.getObActive(a,this.itemsPerPage,this.filtru)}changeItemsPerPage(a){this.currentPage=1,this.itemsPerPage=a,this.getObActive(this.currentPage,this.itemsPerPage,this.filtru)}filter(a){this.filtru=a,this.currentPage=1,this.getObActive(this.currentPage,this.itemsPerPage,this.filtru)}generatePDF(){this.pdfServiceSub=this.pdfService.getObiectiveActualePdf(this.idAngajat,null).subscribe(a=>{let e=this.pdfService.base64ToBlob(a.fileContents,a.contentType),n=URL.createObjectURL(e);window.open(n,"_blank")})}getObActive(a,e,n){this.obiectiveActSub=this.obService.getObiectiveActuale(this.idAngajat,a,e,n).subscribe(o=>{this.obiectiveActuale=o.listaObActuale,this.pages=o.pages,this.currentPage=o.currentPage,o.listaObActuale&&o.listaObActuale.length>0&&(this.anul=new Date(o.listaObActuale[0].dataIn).getFullYear(),this.matricolaAngajat=o.listaObActuale[0].matricolaAngajat)})}static{this.\u0275fac=function(e){return new(e||Je)(h(A),h(Ee),h(z))}}static{this.\u0275cmp=y({type:Je,selectors:[["obiective-actuale"]],standalone:!1,decls:41,vars:7,consts:[["obActualePageContent",""],["obActualeTable",""],[1,"row"],[1,"col-12","text-center","p-4"],[3,"idAngajat"],[1,"row","pt-1"],[1,"col-12"],[1,"p-4","border","rounded"],[1,"form-group","row","p-2"],[1,"col-auto"],["type","button","mat-raised-button","","color","accent",1,"form-control",3,"click"],["color","basic","fontIcon","print"],[3,"nextPage","previousPage","lastPage","selectItemsPerPage","serachFilter","currentPage","pages","itemsPerPage"],[1,"table","p-3","table-striped","table-bordered"],[1,"table-header"],[4,"ngFor","ngForOf"],[3,"routerLink"],[1,"bold-font"],[2,"text-align","center"],["type","button","color","basic","mat-mini-fab","",4,"ngIf"],["type","button","color","basic","mat-mini-fab",""]],template:function(e,n){if(e&1){let o=S();i(0,"div",null,0)(2,"div",2)(3,"div",3)(4,"h3"),r(5,"Obiective Active"),t()()(),b(6,"userdata-header",4),i(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"button",10),f("click",function(){return p(o),u(n.generatePDF())}),b(13,"mat-icon",11),r(14," \xA0 PDF Obiective Actuale "),t()()(),i(15,"table-header",12),f("nextPage",function(d){return p(o),u(n.nextPage(d))})("previousPage",function(d){return p(o),u(n.previousPage(d))})("lastPage",function(d){return p(o),u(n.lastPage(d))})("selectItemsPerPage",function(d){return p(o),u(n.changeItemsPerPage(d))})("serachFilter",function(d){return p(o),u(n.filter(d))}),t(),i(16,"table",13)(17,"thead",14)(18,"th"),r(19,"Tip"),t(),i(20,"th"),r(21,"Denumire"),t(),i(22,"th"),r(23,"Data \xEEnceput"),t(),i(24,"th"),r(25,"Frecven\u021Ba"),t(),i(26,"th"),r(27,"Data sf\xE2r\u0219it"),t(),i(28,"th"),r(29,"Val. min. | Bonus min."),t(),i(30,"th"),r(31,"Val. target | Bonus target"),t(),i(32,"th"),r(33,"Val. max. | Bonus max."),t(),i(34,"th"),r(35,"Obiectiv calitativ"),t()(),i(36,"tbody",null,1),g(38,si,22,19,"tr",15),t()()()()()(),i(39,"div",5),b(40,"back-button",16),t()}e&2&&(l(6),m("idAngajat",n.idAngajat),l(9),m("currentPage",n.currentPage)("pages",n.pages)("itemsPerPage",n.itemsPerPage),l(23),m("ngForOf",n.obiectiveActuale),l(2),m("routerLink",W(6,ri)))},dependencies:[ee,M,T,V,L,H,$,xe,B,U],encapsulation:2})}};De=E([w({checkProperties:!0})],De);var ci=()=>["../../listaSubalterni"];function mi(s,a){s&1&&(i(0,"button",20),r(1," DA "),t())}function di(s,a){s&1&&(i(0,"button",20),r(1," NU "),t())}function pi(s,a){s&1&&b(0,"mat-icon",21)}function ui(s,a){s&1&&b(0,"mat-icon",22)}function bi(s,a){if(s&1&&(i(0,"tr")(1,"td"),r(2),t(),i(3,"td"),r(4),t(),i(5,"td"),r(6),N(7,"date"),t(),i(8,"td"),r(9),t(),i(10,"td"),r(11),N(12,"date"),t(),i(13,"td"),r(14),t(),i(15,"td",15),r(16),t(),i(17,"td"),r(18),t(),i(19,"td",16),g(20,mi,2,0,"button",17)(21,di,2,0,"button",17),t(),i(22,"td",16),g(23,pi,1,0,"mat-icon",18)(24,ui,1,0,"mat-icon",19),t()()),s&2){let e=a.$implicit;l(2),_(e.tip=="I"?"Individual":e.tip=="D"?"Depatamental":"Corporativ"),l(2),_(e.denumire),l(2),_(j(7,15,e.dataIn,"dd/MM/yyyy")),l(3),_(e.frecventa),l(2),_(j(12,18,e.dataSf,"dd/MM/yyyy")),l(3),F("Val.: ",e.valMin?e.valMin:"-"," | ",e.bonusMin?e.bonusMin:"0"," (RON)"),l(2),F("Val.: ",e.valTarget?e.valTarget:"-"," | ",e.bonusTarget?e.bonusTarget:"0"," (RON)"),l(2),F("Val.: ",e.valMax?e.valMax:"-"," | ",e.bonusMax?e.bonusMax:"0"," (RON)"),l(2),m("ngIf",e.isFaraProcent),l(),m("ngIf",!e.isFaraProcent),l(2),m("ngIf",e.isRealizat),l(),m("ngIf",!e.isRealizat)}}var Ne=class Ye{constructor(a,e,n){this.obService=a,this.route=e,this.pdfService=n,this.istoricObiective=[],this.pages=0,this.currentPage=1,this.itemsPerPage=10,this.filtru="",this.istoricObPdf=Fe.OBIECTIVEISTORIC,this.route.params.subscribe(o=>{this.idAngajat=+o.id,this.getIstoricOb(this.currentPage,this.itemsPerPage,this.filtru)})}ngOnInit(){}nextPage(a){this.getIstoricOb(a,this.itemsPerPage,this.filtru)}previousPage(a){this.getIstoricOb(a,this.itemsPerPage,this.filtru)}lastPage(a){this.getIstoricOb(a,this.itemsPerPage,this.filtru)}changeItemsPerPage(a){this.currentPage=1,this.itemsPerPage=a,this.getIstoricOb(this.currentPage,this.itemsPerPage,this.filtru)}filter(a){this.filtru=a,this.currentPage=1,this.getIstoricOb(this.currentPage,this.itemsPerPage,this.filtru)}generatePDF(){this.pdfServiceSub=this.pdfService.getObiectiveIstoricPdf(this.idAngajat,null).subscribe(a=>{let e=this.pdfService.base64ToBlob(a.fileContents,a.contentType),n=URL.createObjectURL(e);window.open(n,"_blank")})}getIstoricOb(a,e,n){this.obiectiveSub?.unsubscribe(),this.obiectiveSub=this.obService.getIstoricObiective(this.idAngajat,a,e,n).subscribe(o=>{this.istoricObiective=o.listaObActuale,this.pages=o.pages,this.currentPage=o.currentPage})}static{this.\u0275fac=function(e){return new(e||Ye)(h(A),h(z),h(Ee))}}static{this.\u0275cmp=y({type:Ye,selectors:[["app-isotoric-obiective"]],standalone:!1,decls:40,vars:7,consts:[[1,"row"],[1,"col-12","text-center","p-4"],[3,"idAngajat"],[1,"row","pt-1"],[1,"col-12"],[1,"p-4","border","rounded"],[1,"form-group","row","p-2"],[1,"col-auto"],["type","button","mat-raised-button","","color","accent",1,"form-control",3,"click"],["color","basic","fontIcon","print"],[3,"nextPage","previousPage","lastPage","selectItemsPerPage","serachFilter","currentPage","pages","itemsPerPage"],[1,"table","p-3","table-striped","table-bordered"],[1,"table-header"],[4,"ngFor","ngForOf"],[3,"routerLink"],[1,"bold-font"],[2,"text-align","center"],["type","button","color","basic","mat-mini-fab","",4,"ngIf"],["color","primary","fontIcon","check",4,"ngIf"],["color","warn","fontIcon","close",4,"ngIf"],["type","button","color","basic","mat-mini-fab",""],["color","primary","fontIcon","check"],["color","warn","fontIcon","close"]],template:function(e,n){e&1&&(i(0,"div",0)(1,"div",1)(2,"h3"),r(3,"Istoric Obiective"),t()()(),b(4,"userdata-header",2),i(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",7)(10,"button",8),f("click",function(){return n.generatePDF()}),b(11,"mat-icon",9),r(12," \xA0 PDF Istoric Obiective "),t()()(),i(13,"table-header",10),f("nextPage",function(c){return n.nextPage(c)})("previousPage",function(c){return n.previousPage(c)})("lastPage",function(c){return n.lastPage(c)})("selectItemsPerPage",function(c){return n.changeItemsPerPage(c)})("serachFilter",function(c){return n.filter(c)}),t(),i(14,"table",11)(15,"thead",12)(16,"th"),r(17,"Tip"),t(),i(18,"th"),r(19,"Denumire"),t(),i(20,"th"),r(21,"Data \xEEnceput"),t(),i(22,"th"),r(23,"Frecven\u021Ba"),t(),i(24,"th"),r(25,"Data sf\xE2r\u0219it"),t(),i(26,"th"),r(27,"Val. min. | Bonus min."),t(),i(28,"th"),r(29,"Val. target | Bonus target"),t(),i(30,"th"),r(31,"Val. max. | Bonus max."),t(),i(32,"th"),r(33,"Obiectiv calitativ"),t(),i(34,"th"),r(35,"Realizat"),t()(),i(36,"tbody"),g(37,bi,25,21,"tr",13),t()()()()(),i(38,"div",3),b(39,"back-button",14),t()),e&2&&(l(4),m("idAngajat",n.idAngajat),l(9),m("currentPage",n.currentPage)("pages",n.pages)("itemsPerPage",n.itemsPerPage),l(24),m("ngForOf",n.istoricObiective),l(2),m("routerLink",W(6,ci)))},dependencies:[ee,M,T,V,L,H,$,xe,B,U],encapsulation:2})}};Ne=E([w({checkProperties:!0})],Ne);var vi=()=>["../../listaSubalterni"];function gi(s,a){s&1&&(i(0,"button",22),r(1," DA "),t())}function hi(s,a){s&1&&(i(0,"button",22),r(1," NU "),t())}function fi(s,a){if(s&1){let e=S();he(0),i(1,"select",23,1),I("ngModelChange",function(o){p(e);let c=v().$implicit;return P(c.isRealizat,o)||(c.isRealizat=o),u(o)}),i(3,"option",24),r(4,"Nu se evalueaz\u0103 acum"),t(),i(5,"option",24),r(6,"DA"),t(),i(7,"option",24),r(8,"NU"),t()(),fe()}if(s&2){let e=v().$implicit;l(),O("ngModel",e.isRealizat),l(2),m("ngValue",null),l(2),m("ngValue",!0),l(2),m("ngValue",!1)}}function _i(s,a){if(s&1){let e=S();i(0,"input",25,2),I("ngModelChange",function(o){p(e);let c=v().$implicit;return P(c.valoareRealizata,o)||(c.valoareRealizata=o),u(o)}),t()}if(s&2){let e=v(),n=e.$implicit,o=e.index;m("id","valoareRealizata"+o),O("ngModel",n.valoareRealizata)}}function Si(s,a){if(s&1&&(i(0,"tr")(1,"td"),r(2),t(),i(3,"td"),r(4),t(),i(5,"td"),r(6),N(7,"date"),t(),i(8,"td"),r(9),t(),i(10,"td"),r(11),t(),i(12,"td",17),r(13),t(),i(14,"td"),r(15),t(),i(16,"td",18),g(17,gi,2,0,"button",19)(18,hi,2,0,"button",19),t(),i(19,"td",18),g(20,fi,9,4,"ng-container",20)(21,_i,2,2,"input",21),t()()),s&2){let e=a.$implicit;l(2),_(e.tip=="I"?"Individual":e.tip=="D"?"Depatamental":"Corporativ"),l(2),_(e.denumire),l(2),_(j(7,14,e.dataIn,"dd/MM/yyyy")),l(3),_(e.frecventa),l(2),F("Val.: ",e.valMin?e.valMin:"-"," | ",e.bonusMin?e.bonusMin:"0"," (RON)"),l(2),F("Val.: ",e.valTarget?e.valTarget:"-"," | ",e.bonusTarget?e.bonusTarget:"0"," (RON)"),l(2),F("Val.: ",e.valMax?e.valMax:"-"," | ",e.bonusMax?e.bonusMax:"0"," (RON)"),l(2),m("ngIf",e.isFaraProcent),l(),m("ngIf",!e.isFaraProcent),l(2),m("ngIf",e.isFaraProcent),l(),m("ngIf",!e.isFaraProcent)}}var je=class Ke{constructor(a,e,n,o,c){this.obService=a,this.route=e,this.toastr=n,this.emailService=o,this.router=c,this.obiectiveActuale=[],this.pages=0,this.currentPage=1,this.itemsPerPage=10,this.filtru="",this.seEvalObCalitativ=[],this.isSaving=!1,this.route.params.subscribe(d=>{this.idAngajat=+d.id,this.getObActive(this.currentPage,this.itemsPerPage,this.filtru)})}save(){this.isSaving=!0;let a=[];this.obiectiveActuale.forEach(e=>{e.valoareRealizata&&a.push(e),(e.isRealizat===!0||e.isRealizat===!1)&&a.push(e)}),this.obService.evaluareObiective(a).subscribe({next:()=>{this.isSaving=!1,this.toastr.success("Obiectivele au fost evaluate cu succes!"),this.emailService.sendEmailObiectiveEvaluate(this.idAngajat),setTimeout(()=>{this.router.navigate(["../../listaSubalterni"],{relativeTo:this.route})},500)},error:e=>{this.isSaving=!1,this.toastr.error(e?.error?.message)}})}nextPage(a){this.getObActive(a,this.itemsPerPage,this.filtru)}previousPage(a){this.getObActive(a,this.itemsPerPage,this.filtru)}lastPage(a){this.getObActive(a,this.itemsPerPage,this.filtru)}changeItemsPerPage(a){this.currentPage=1,this.itemsPerPage=a,this.getObActive(this.currentPage,this.itemsPerPage,this.filtru)}filter(a){this.filtru=a,this.currentPage=1,this.getObActive(this.currentPage,this.itemsPerPage,this.filtru)}getObActive(a,e,n){this.obiectiveActSub?.unsubscribe(),this.obiectiveActSub=this.obService.getObiectiveActuale(this.idAngajat,a,e,n).subscribe(o=>{this.obiectiveActuale=o.listaObActuale,this.obiectiveActuale=this.obiectiveActuale.map(c=>Xe(Qe({},c),{isRealizat:null})),this.pages=o.pages,this.currentPage=o.currentPage})}static{this.\u0275fac=function(e){return new(e||Ke)(h(A),h(z),h(ie),h(Te),h(Oe))}}static{this.\u0275cmp=y({type:Ke,selectors:[["app-evaluare-obiective"]],standalone:!1,decls:39,vars:8,consts:[["evalObiective","ngForm"],["isRealizat","ngModel"],["valoareRealizata","ngModel"],[1,"row"],[1,"col-12","text-center","p-4"],[3,"idAngajat"],[3,"ngSubmit"],[1,"row","pt-1"],[1,"col-12"],[1,"p-4","border","rounded"],[3,"nextPage","previousPage","lastPage","selectItemsPerPage","serachFilter","currentPage","pages","itemsPerPage"],[1,"table","p-3","table-striped","table-bordered"],[1,"table-header"],[4,"ngFor","ngForOf"],[1,"col-6"],[3,"routerLink"],[3,"disabled"],[1,"bold-font"],[2,"text-align","center"],["type","button","color","basic","mat-mini-fab","",4,"ngIf"],[4,"ngIf"],["type","text","class","form-control form-control-sm","name","valoareRealizata",3,"id","ngModel","ngModelChange",4,"ngIf"],["type","button","color","basic","mat-mini-fab",""],["id","evalob-isRealizat","name","isRealizat",1,"form-select","form-select-sm",3,"ngModelChange","ngModel"],[3,"ngValue"],["type","text","name","valoareRealizata",1,"form-control","form-control-sm",3,"ngModelChange","id","ngModel"]],template:function(e,n){if(e&1){let o=S();i(0,"div",3)(1,"div",4)(2,"h3"),r(3,"Evaluare Obiective"),t()()(),b(4,"userdata-header",5),i(5,"form",6,0),f("ngSubmit",function(){return p(o),u(n.save())}),i(7,"div",7)(8,"div",8)(9,"div",9)(10,"table-header",10),f("nextPage",function(d){return p(o),u(n.nextPage(d))})("previousPage",function(d){return p(o),u(n.previousPage(d))})("lastPage",function(d){return p(o),u(n.lastPage(d))})("selectItemsPerPage",function(d){return p(o),u(n.changeItemsPerPage(d))})("serachFilter",function(d){return p(o),u(n.filter(d))}),t(),i(11,"table",11)(12,"thead",12)(13,"th"),r(14,"Tip"),t(),i(15,"th"),r(16,"Denumire"),t(),i(17,"th"),r(18,"Data \xEEnceput"),t(),i(19,"th"),r(20,"Frecven\u021Ba"),t(),i(21,"th"),r(22,"Val. min. | Bonus min."),t(),i(23,"th"),r(24,"Val. target | Bonus target"),t(),i(25,"th"),r(26,"Val. max. | Bonus max."),t(),i(27,"th"),r(28,"Obiectiv calitativ"),t(),i(29,"th"),r(30,"Realizat"),t()(),i(31,"tbody"),g(32,Si,22,17,"tr",13),t()()()()(),i(33,"div",7)(34,"div",7)(35,"div",14),b(36,"cancel-button",15),t(),i(37,"div",14),b(38,"save-button",16),t()()()()}e&2&&(l(4),m("idAngajat",n.idAngajat),l(6),m("currentPage",n.currentPage)("pages",n.pages)("itemsPerPage",n.itemsPerPage),l(22),m("ngForOf",n.obiectiveActuale),l(4),m("routerLink",W(7,vi)),l(2),m("disabled",n.isSaving))},dependencies:[ee,M,T,K,X,Z,ae,Q,q,G,Y,J,H,$,Ie,Ce,B,U],encapsulation:2})}};je=E([w({checkProperties:!0})],je);var Oi=[{path:"listaSubalterni",component:ye},{path:"setareObiective/:id",component:Ae},{path:"actuale/:id",component:De},{path:"istoric/:id",component:Ne},{path:"evaluare/:id",component:je}],St=(()=>{class s{static{this.\u0275fac=function(n){return new(n||s)}}static{this.\u0275mod=ge({type:s})}static{this.\u0275inj=ue({imports:[Le.forChild(Oi),Le]})}}return s})();var Dn=(()=>{class s{static{this.\u0275fac=function(n){return new(n||s)}}static{this.\u0275mod=ge({type:s})}static{this.\u0275inj=ue({imports:[vt,bt,St]})}}return s})();export{Dn as ObiectiveModule};
