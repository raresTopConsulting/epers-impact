import{a as He}from"./chunk-BUQCJ4EJ.js";import{h as O,j as de,k as q}from"./chunk-7HPXOHU7.js";import{a as ze,b as qe}from"./chunk-NC7IXFJV.js";import{$a as Q,Bb as ie,F as d,Ga as z,Ha as A,I as S,Ia as N,J as U,Ja as Be,K as se,Ka as k,L as g,La as me,Na as ve,Nb as Oe,O as p,Oa as F,Pa as Se,Q as E,Qa as H,Ra as G,S as r,T as i,Ta as Ae,U as b,X as M,Z as w,Za as V,_ as C,_a as L,a as Te,aa as Fe,ab as J,ba as Ve,bb as D,ca as Le,cb as K,d as j,da as y,db as pe,ea as s,eb as X,fa as P,fb as Y,g as I,ga as x,gb as Z,hb as $,ia as f,ja as h,jb as Ne,ka as _,la as De,ma as Ce,mb as ke,o as ne,p as oe,qb as be,r as ae,ra as B,sa as T,v as c,w as u,wb as ee,xa as We,xb as te,ya as le,yb as Re,zb as je}from"./chunk-5G5VBFYZ.js";var it=()=>[""];function rt(o,n){o&1&&(r(0,"span",21),s(1,"C\xE2mpul este obligatoriu!"),i())}function nt(o,n){o&1&&(r(0,"span",21),s(1,"C\xE2mpul este obligatoriu!"),i())}function ot(o,n){o&1&&(r(0,"span",21),s(1,"Parolele introduse nu sunt identice!"),i())}function at(o,n){if(o&1){let e=M();r(0,"div",4)(1,"div",13)(2,"div",14)(3,"label"),s(4,"Nume \u0219i prenume"),i(),r(5,"span",15),s(6),i()()(),r(7,"div",13)(8,"div",14)(9,"label",16),s(10,"Parola nou\u0103"),i(),r(11,"input",17,1),_("ngModelChange",function(l){c(e);let a=C();return h(a.passwordChange.newPass,l)||(a.passwordChange.newPass=l),u(l)}),i(),g(13,rt,2,0,"span",18),i()(),r(14,"div",13)(15,"div",14)(16,"label",19),s(17,"Confirmare parol\u0103"),i(),r(18,"input",20,2),_("ngModelChange",function(l){c(e);let a=C();return h(a.passwordChange.confNewPass,l)||(a.passwordChange.confNewPass=l),u(l)}),i(),g(20,nt,2,0,"span",18)(21,ot,2,0,"span",18),i()()()}if(o&2){let e=y(12),t=y(19),l=C();d(6),P(l.passwordChange.username),d(5),E("invalid",(e.touched||e.dirty)&&e.invalid),f("ngModel",l.passwordChange.newPass),d(2),p("ngIf",(e.touched||e.dirty)&&e.invalid),d(5),E("invalid",(t.touched||t.dirty)&&t.invalid),f("ngModel",l.passwordChange.confNewPass),d(2),p("ngIf",(t.touched||t.dirty)&&t.invalid),d(),p("ngIf",l.passwordChange.newPass!==l.passwordChange.confNewPass&&(t.touched||t.dirty)&&t.valid&&(e.touched||e.dirty)&&e.valid)}}var R=class we{constructor(n,e,t,l,a){this.userPasswordService=n,this.toastr=e,this.userService=t,this.router=l,this.route=a,this.passwordChange={}}ngOnInit(){this.route.params.subscribe(n=>{this.userId=+n.id,this.passwordChange.userId=this.userId,this.userServiceSub=this.userService.get(this.userId).subscribe(e=>{e&&(this.user=e,this.passwordChange.username=e.username)})})}onChangePassword(){this.userPassSub=this.userPasswordService.changePassword(this.passwordChange).subscribe({next:()=>{this.toastr.success("Parola a fost schimbat\u0103 cu succes!"),setTimeout(()=>{this.router.navigate(["/"])},1e3)},error:n=>{this.toastr.error(n?.error?.message)}})}static{this.\u0275fac=function(e){return new(e||we)(S(He),S(O),S(A),S(k),S(N))}}static{this.\u0275cmp=U({type:we,selectors:[["change-password"]],standalone:!1,decls:14,vars:4,consts:[["passwordChangeForm","ngForm"],["newPass","ngModel"],["confNewPass","ngModel"],[1,"container"],[1,"row"],[1,"row","p-3","border"],[1,"col-12","text-center","p-4","border-bottom"],[3,"ngSubmit"],["class","row",4,"ngIf"],[1,"row","pt-3"],[1,"col-6"],[3,"routerLink"],[3,"disabled"],[1,"row","mb-3"],[1,"col-md-12"],[1,"form-control"],["for","pass-change-newPass"],["type","password","id","pass-change-newPass","name","newPass","required","",1,"form-control",3,"ngModelChange","ngModel"],["class","help-block help-block-danger",4,"ngIf"],["for","pass-change-confNewPass"],["type","password","id","pass-change-confNewPass","name","confNewPass","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"help-block","help-block-danger"]],template:function(e,t){if(e&1){let l=M();r(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6)(4,"h3"),s(5,"Schimba\u021Bi Parola"),i()(),r(6,"form",7,0),w("ngSubmit",function(){return c(l),u(t.onChangePassword())}),g(8,at,22,10,"div",8),r(9,"div",9)(10,"div",10),b(11,"cancel-button",11),i(),r(12,"div",10),b(13,"save-button",12),i()()()()()()}if(e&2){let l=y(7);d(8),p("ngIf",t.passwordChange),d(3),p("routerLink",De(3,it)),d(2),p("disabled",!l.valid)}},dependencies:[T,K,V,L,Q,$,D,J,ee,te,me],encapsulation:2})}};R=I([F({checkProperties:!0})],R);var st=o=>["./changePassword/",o],lt=o=>["./edit",o];function dt(o,n){if(o&1){let e=M();r(0,"table-header",17),w("add",function(){c(e);let l=C();return u(l.navToAdd())})("nextPage",function(l){c(e);let a=C();return u(a.nextPage(l))})("previousPage",function(l){c(e);let a=C();return u(a.previousPage(l))})("lastPage",function(l){c(e);let a=C();return u(a.lastPage(l))})("selectItemsPerPage",function(l){c(e);let a=C();return u(a.changeItemsPerPage(l))})("serachFilter",function(l){c(e);let a=C();return u(a.filter(l))})("serachIdDDFilter",function(l){c(e);let a=C();return u(a.filterFirma(l))}),i()}if(o&2){let e=C();p("currentPage",e.currentPage)("pages",e.pages)("itemsPerPage",e.itemsPerPage)("displayAddButton",!0)("searchCriteria",e.filtru?e.filtru:"Nume, Prenume, Matricola, Post, Compartiment, Loca\u021Bie")("ddFilterList",e.ddFirme)("ddFilterVisible",!0)}}function mt(o,n){if(o&1){let e=M();r(0,"table-header",18),w("add",function(){c(e);let l=C();return u(l.navToAdd())})("nextPage",function(l){c(e);let a=C();return u(a.nextPage(l))})("previousPage",function(l){c(e);let a=C();return u(a.previousPage(l))})("lastPage",function(l){c(e);let a=C();return u(a.lastPage(l))})("selectItemsPerPage",function(l){c(e);let a=C();return u(a.changeItemsPerPage(l))})("serachFilter",function(l){c(e);let a=C();return u(a.filter(l))}),i()}if(o&2){let e=C();p("currentPage",e.currentPage)("pages",e.pages)("itemsPerPage",e.itemsPerPage)("displayAddButton",!0)("searchCriteria",e.filtru?e.filtru:"Nume, Prenume, Matricola, Post, Compartiment, Loca\u021Bie")}}function pt(o,n){if(o&1){let e=M();r(0,"tr")(1,"td",24),s(2),i(),r(3,"td",24),s(4),i(),r(5,"td",24),s(6),i(),r(7,"td",24),s(8),i(),r(9,"td",24),s(10),i(),r(11,"td",24),s(12),i(),r(13,"td",24),s(14),i(),r(15,"td",24),s(16),i(),r(17,"td",24),s(18),i(),r(19,"td",24),s(20),i(),r(21,"td",24)(22,"div",25)(23,"button",26),b(24,"mat-icon",27),i()()(),r(25,"td",24)(26,"div",25),b(27,"table-edit-button",28),i()(),r(28,"td",24)(29,"div",25)(30,"table-delete-button",29),w("click",function(){let l=c(e).$implicit,a=C(2);return u(a.openDeleteDialog(l.id))}),i()()()()}if(o&2){let e=n.$implicit;d(2),P(e.matricola),d(2),P(e.nume_Prenume),d(2),P(e.rol),d(2),P(e.username),d(2),P(e.denumirePost),d(2),P(e.cor),d(2),P(e.firma),d(2),P(e.organizatieIntermediara),d(2),P(e.organizatieBaza),d(2),P(e.locatie),d(3),p("routerLink",Ce(12,st,e.id)),d(4),p("routerLink",Ce(14,lt,e.id))}}function ct(o,n){if(o&1&&(r(0,"table",19)(1,"thead",20)(2,"tr",21)(3,"th",22),s(4,"Matricola"),i(),r(5,"th",22),s(6,"Nume \u0219i prenume"),i(),r(7,"th",22),s(8,"Rol"),i(),r(9,"th",22),s(10,"Email"),i(),r(11,"th",22),s(12,"Post"),i(),r(13,"th",22),s(14,"COR"),i(),r(15,"th",22),s(16,"Firma"),i(),r(17,"th",22),s(18,"Organiza\u021Bie intermediar\u0103"),i(),r(19,"th",22),s(20,"Organiza\u021Bie de baz\u0103"),i(),r(21,"th",22),s(22,"Loca\u021Bie"),i(),r(23,"th",22),s(24,"Schimba\u021Bi parola"),i(),r(25,"th",22),s(26,"Modifica\u021Bi datele"),i(),r(27,"th",22),s(28,"\u0218terge\u021Bi"),i()()(),r(29,"tbody"),g(30,pt,31,16,"tr",23),i()()),o&2){let e=C();d(30),p("ngForOf",e.listaUtilizatori)}}function ut(o,n){o&1&&b(0,"mat-spinner")}var ue=class Ee{constructor(n,e,t,l,a){this.userService=n,this.router=e,this.route=t,this.firmeService=l,this.dialog=a,this.pages=0,this.currentPage=1,this.itemsPerPage=10,this.filtru="",this.filtruIdFirma=null,this.minId=0,this.maxId=0,this.isSync=!1,this.firmeSub=new j,this.registerSincronSub=new j,this.userSub=new j,this.userPassSub=new j,this.tableFiltersSub=new j,this.getDDFirme(),this.tableFiltersSub=this.userService.tableFiltersObs$.subscribe(m=>{this.filtru=m?.filter,this.filtruIdFirma=m?.filterFirma,this.currentPage=m?.currentPage,this.itemsPerPage=m?.itemsPerPage}),this.getListaUtilizatori(this.currentPage,this.itemsPerPage,this.filtru,this.filtruIdFirma),this.idFirmaLoggedInUser=JSON.parse(localStorage.getItem("user"))?.idFirma}ngOnInit(){this.isSync=!1}getListaUtilizatori(n,e,t,l){this.userService.listaUtilizatori(n,e,t,l),this.userSub=this.userService.userListDisplayModelObs$.subscribe(a=>{this.listaUtilizatori=a?.utilizatori,this.pages=a?.pages,this.currentPage=a?.currentPage})}nextPage(n){this.getListaUtilizatori(n,this.itemsPerPage,this.filtru,this.filtruIdFirma)}previousPage(n){this.getListaUtilizatori(n,this.itemsPerPage,this.filtru,this.filtruIdFirma)}lastPage(n){this.getListaUtilizatori(n,this.itemsPerPage,this.filtru,this.filtruIdFirma)}changeItemsPerPage(n){this.currentPage=1,this.itemsPerPage=n,this.getListaUtilizatori(this.currentPage,this.itemsPerPage,this.filtru,this.filtruIdFirma)}filter(n){this.filtru=n,this.currentPage=1,this.getListaUtilizatori(this.currentPage,this.itemsPerPage,this.filtru,this.filtruIdFirma)}openDeleteDialog(n){this.dialog.open(be,{data:{entityName:"Utilizatorul",entityId:n}}).afterClosed().subscribe(()=>{this.getListaUtilizatori(this.currentPage,this.itemsPerPage,this.filtru,this.filtruIdFirma)})}openChangePasswordDialog(n,e){let t=new Ne;t.disableClose=!1,t.autoFocus=!1,t.data={userId:n,newPass:"",confPass:"",username:e},this.dialog.open(R,t),this.dialog.open(R,t).afterClosed().subscribe(a=>{a&&a.newPass&&a.confPass&&console.log("succes")})}navToAdd(){this.router.navigate(["./add"],{relativeTo:this.route})}filterFirma(n){this.filtruIdFirma=n,this.currentPage=1,this.pages=0,this.getListaUtilizatori(this.currentPage,this.itemsPerPage,this.filtru,this.filtruIdFirma)}getDDFirme(){this.firmeSub=this.firmeService.firmeSelections$.subscribe(n=>{this.ddFirme=n})}registerFromSincron(){this.isSync=!0,this.registerSincronSub=this.userService.registerFromSincron(this.minId,this.maxId).subscribe(()=>{this.isSync=!1})}static{this.\u0275fac=function(e){return new(e||Ee)(S(A),S(k),S(N),S(q),S(ke))}}static{this.\u0275cmp=U({type:Ee,selectors:[["user-list"]],viewQuery:function(e,t){if(e&1&&Fe(be,5),e&2){let l;Ve(l=Le())&&(t.deleteModal=l.first)}},standalone:!1,decls:29,vars:6,consts:[[1,"row"],[1,"col-12","text-center","p-4"],[1,"row","p-2","border-rounded"],[1,"form-group","row","m-1"],[1,"col-sm-4","col-form-label"],["for","minId",1,"col-sm-1","col-form-label"],[1,"col-sm-2"],["type","number","id","minId","name","minId",1,"form-control","form-control-sm",3,"ngModelChange","ngModel"],["for","maxId",1,"col-sm-1","col-form-label"],["type","number","id","maxId","name","maxId",1,"form-control","form-control-sm",3,"ngModelChange","ngModel"],["mat-raised-button","","color","primary","type","button",3,"click"],["fontIcon","sync"],["ddFilterCriteria","Firma",3,"currentPage","pages","itemsPerPage","displayAddButton","searchCriteria","ddFilterList","ddFilterVisible","add","nextPage","previousPage","lastPage","selectItemsPerPage","serachFilter","serachIdDDFilter",4,"ngIf"],[3,"currentPage","pages","itemsPerPage","displayAddButton","searchCriteria","add","nextPage","previousPage","lastPage","selectItemsPerPage","serachFilter",4,"ngIf"],["color","basic","fontIcon","info"],["class","table table-striped table-bordered",4,"ngIf"],[4,"ngIf"],["ddFilterCriteria","Firma",3,"add","nextPage","previousPage","lastPage","selectItemsPerPage","serachFilter","serachIdDDFilter","currentPage","pages","itemsPerPage","displayAddButton","searchCriteria","ddFilterList","ddFilterVisible"],[3,"add","nextPage","previousPage","lastPage","selectItemsPerPage","serachFilter","currentPage","pages","itemsPerPage","displayAddButton","searchCriteria"],[1,"table","table-striped","table-bordered"],[1,"table-header"],[1,"table-info"],["scope","col","colspan","1"],[4,"ngFor","ngForOf"],["colspan","1"],[1,"text-center"],["type","button","mat-mini-fab","","color","primary",3,"routerLink"],["fontIcon","lock"],[3,"routerLink"],[3,"click"]],template:function(e,t){e&1&&(r(0,"div",0)(1,"div",1)(2,"h3"),s(3,"List\u0103 Subalterni"),i()()(),r(4,"div",2),b(5,"router-outlet"),r(6,"div",3)(7,"label",4),s(8,"Sincronizarea datelor cu cele din platforma Sincron"),i(),r(9,"label",5),s(10,"Id minim:"),i(),r(11,"div",6)(12,"input",7),_("ngModelChange",function(a){return h(t.minId,a)||(t.minId=a),a}),i()(),r(13,"label",8),s(14,"Id maxim:"),i(),r(15,"div",6)(16,"input",9),_("ngModelChange",function(a){return h(t.maxId,a)||(t.maxId=a),a}),i()(),r(17,"div",6)(18,"button",10),w("click",function(){return t.registerFromSincron()}),b(19,"mat-icon",11),s(20,"Sincronizare "),i()()(),b(21,"hr"),g(22,dt,1,7,"table-header",12)(23,mt,1,5,"table-header",13),r(24,"p"),b(25,"mat-icon",14),s(26," C\u0103utarea se poate efectua dup\u0103 urm\u0103toarele criterii: Nume, Prenume, Matricola, Post, Compartiment \u0219i Loca\u021Bie. "),i(),g(27,ct,31,1,"table",15)(28,ut,1,0,"mat-spinner",16),i()),e&2&&(d(12),f("ngModel",t.minId),d(4),f("ngModel",t.maxId),d(6),p("ngIf",!t.idFirmaLoggedInUser),d(),p("ngIf",t.idFirmaLoggedInUser),d(4),p("ngIf",!t.isSync),d(),p("ngIf",t.isSync))},dependencies:[ze,B,T,V,pe,L,D,H,G,Ae,ie,Re,je,Be,me],encapsulation:2})}};ue=I([F({checkProperties:!0})],ue);function ft(o,n){o&1&&(r(0,"h3"),s(1,"\xCEnregistrare Utilizator (utilizator nou)"),i())}function ht(o,n){o&1&&(r(0,"h3"),s(1,"Modificare date Utilizator"),i())}function _t(o,n){o&1&&(r(0,"span",49),s(1,"C\xE2mpul este obligatoriu!"),i())}function Ct(o,n){o&1&&(r(0,"span",49),s(1,"C\xE2mpul este obligatoriu!"),i())}function vt(o,n){o&1&&(r(0,"span",49),s(1,"C\xE2mpul este obligatoriu!"),i())}function St(o,n){o&1&&(r(0,"span",49),s(1,"C\xE2mpul este obligatoriu!"),i())}function bt(o,n){if(o&1){let e=M();r(0,"div",18)(1,"div",19)(2,"label",50),s(3,"Parola"),i(),r(4,"input",51,9),_("ngModelChange",function(l){c(e);let a=C();return h(a.user.password,l)||(a.user.password=l),u(l)}),i(),g(6,St,2,0,"span",22),i()()}if(o&2){let e=y(5),t=C();d(4),E("invalid",(e.touched||e.dirty)&&e.invalid),f("ngModel",t.user.password),d(2),p("ngIf",(e.touched||e.dirty)&&e.invalid)}}function wt(o,n){o&1&&(r(0,"span",49),s(1,"C\xE2mpul este obligatoriu!"),i())}function Pt(o,n){o&1&&(r(0,"span",49),s(1,"Parolele introduse nu sunt identice!"),i())}function yt(o,n){if(o&1){let e=M();r(0,"div",18)(1,"div",19)(2,"label",52),s(3,"Confirm\u0103 Parola"),i(),r(4,"input",53,10),_("ngModelChange",function(l){c(e);let a=C();return h(a.user.confirmPassword,l)||(a.user.confirmPassword=l),u(l)}),i(),g(6,wt,2,0,"span",22)(7,Pt,2,0,"span",22),i()()}if(o&2){let e=y(5),t=C();d(4),E("invalid",(e.touched||e.dirty)&&e.invalid),f("ngModel",t.user.confirmPassword),d(2),p("ngIf",(e.touched||e.dirty)&&e.invalid),d(),p("ngIf",t.errorPassword)}}function Et(o,n){if(o&1&&(r(0,"option",32),s(1),i()),o&2){let e=n.$implicit;p("value",e.Value),d(),x("",e.Text," ")}}function Mt(o,n){if(o&1&&(r(0,"option",32),s(1),i()),o&2){let e=n.$implicit;p("value",e.Id),d(),x("",e.Text," ")}}function xt(o,n){if(o&1&&(r(0,"option",32),s(1),i()),o&2){let e=n.$implicit;p("value",e.Id),d(),x("",e.Text," ")}}function It(o,n){if(o&1&&(r(0,"option",32),s(1),i()),o&2){let e=n.$implicit;p("value",e.Id),d(),x("",e.Text," ")}}function Ut(o,n){if(o&1&&(r(0,"option",32),s(1),i()),o&2){let e=n.$implicit;p("value",e.Id),d(),x("",e.Text," ")}}function Tt(o,n){if(o&1&&(r(0,"option",32),s(1),i()),o&2){let e=n.$implicit;p("value",e.Id),d(),x("",e.Text," ")}}var ge=class Me{constructor(n,e,t,l,a,m){this.ddStateService=n,this.userService=e,this.toastr=t,this.router=l,this.firmeService=a,this.route=m,this.errorPassword=!1,this.isEditMode=!1,this.loggedInUserHasFirma=!1,this.user={},this.firmeSub=this.firmeService.firmeSelections$.subscribe(v=>{this.ddFirmeSelectionList=v}),this.firmaLoggedInUserSub=this.firmeService.firmaLoggedInUser$.subscribe(v=>{v&&(this.loggedInUserHasFirma=!0,this.user.idFirma=v.IdFirma)})}ngOnInit(){this.ddSub=this.ddStateService.appDropdownsSubject$.subscribe(n=>{this.ddLocatii=n?.DdLocatii,this.ddPosturi=n?.DdPosturi,this.ddCompartimente=n?.DdCompartimente,this.ddUseri=n?.DdUseri,this.ddRoluri=n?.DdRoluri,this.allDdLocatii=n?.DdLocatii,this.allDdPosturi=n?.DdPosturi,this.allDdCompartimente=n?.DdCompartimente,this.allddUseri=n?.DdUseri,this.filterDropdowns(this.user.idFirma)})}onSubmit(){this.user.password!=this.user.confirmPassword?this.errorPassword=!0:this.errorPassword=!1,this.errorPassword||this.userService.register(this.user).subscribe({next:()=>{this.toastr.success("Utilizatorul a fost creat cu succes!"),setTimeout(()=>{this.router.navigate(["../../"],{relativeTo:this.route})},1e3)},error:n=>{this.toastr.error(n.error)}})}onCancel(){this.router.navigate(["../"],{relativeTo:this.route})}firmaChanged(n){this.filterDropdowns(n)}filterDropdowns(n){n&&(this.ddCompartimente=this.allDdCompartimente?.filter(e=>e.IdFirma===+n),this.ddLocatii=this.allDdLocatii?.filter(e=>e.IdFirma===+n),this.ddPosturi=this.allDdPosturi?.filter(e=>e.IdFirma===+n),this.ddUseri=this.allddUseri?.filter(e=>e.IdFirma===+n))}static{this.\u0275fac=function(e){return new(e||Me)(S(de),S(A),S(O),S(k),S(q),S(N))}}static{this.\u0275cmp=U({type:Me,selectors:[["user-create"]],standalone:!1,decls:89,vars:31,consts:[["registerForm","ngForm"],["username","ngModel"],["numePrenume","ngModel"],["matricola","ngModel"],["idLocatie","ngModel"],["idPost","ngModel"],["idCompartiment","ngModel"],["idRol","ngModel"],["idSuperior","ngModel"],["password","ngModel"],["confirmPassword","ngModel"],[1,"container"],[1,"row"],[1,"row","p-3","border",2,"font-size","small"],[1,"col-12","text-center","p-4","border-bottom"],[4,"ngIf"],[3,"ngSubmit"],[1,"col-6","pt-4"],[1,"row","mb-3"],[1,"col-md-12"],["for","usr-create-edit-username",1,"required-label"],["type","text","id","usr-create-edit-username","name","username","required","",1,"form-control",3,"ngModelChange","ngModel"],["class","help-block help-block-danger",4,"ngIf"],[1,"col-ms-12"],["for","usr-create-edit-numePrenume",1,"required-label"],["type","text","id","usr-create-edit-numePrenume","name","numePrenume","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","usr-create-edit-matricola",1,"required-label"],["type","text","id","usr-create-edit-matricola","name","matricola","required","",1,"form-control",3,"ngModelChange","ngModel"],["class","row mb-3",4,"ngIf"],[1,"col-md-6"],["for","loc-firma"],["id","ddFilter","name","ddFilter",1,"form-select",3,"ngModelChange","ngModel","disabled"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["for","usr-create-edit-locatie"],["id","usr-create-edit-locatie","name","idLocatie",1,"form-select",3,"ngModelChange","ngModel"],["value",""],["for","usr-create-edit-post"],["id","usr-create-edit-post","name","idPost",1,"form-select",3,"ngModelChange","ngModel"],["for","usr-create-edit-compartiment"],["id","usr-create-edit-compartiment","name","idCompartiment",1,"form-select",3,"ngModelChange","ngModel"],["for","usr-create-edit-rol"],["id","usr-create-edit-rol","name","idRol",1,"form-select",3,"ngModelChange","ngModel"],["for","usr-create-edit-superior"],["id","usr-create-edit-superior","name","idSuperior",1,"form-select",3,"ngModelChange","ngModel"],[1,"row","pt-3"],[1,"col-6"],[3,"click"],[3,"disabled"],[1,"help-block","help-block-danger"],["for","usr-create-edit-password",1,"required-label"],["type","password","id","usr-create-edit-password","name","password","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","usr-create-edit-confirmPassword",1,"required-label"],["type","password","id","usr-create-edit-confirmPassword","name","confirmPassword","required","",1,"form-control",3,"ngModelChange","ngModel"]],template:function(e,t){if(e&1){let l=M();r(0,"div",11)(1,"div",12)(2,"div",13)(3,"div",14),g(4,ft,2,0,"h3",15)(5,ht,2,0,"h3",15),i(),r(6,"form",16,0),w("ngSubmit",function(){return c(l),u(t.onSubmit())}),r(8,"div",12)(9,"div",17)(10,"div",18)(11,"div",19)(12,"label",20),s(13,"Email"),i(),r(14,"input",21,1),_("ngModelChange",function(m){return c(l),h(t.user.username,m)||(t.user.username=m),u(m)}),i(),g(16,_t,2,0,"span",22),i()(),r(17,"div",18)(18,"div",23)(19,"label",24),s(20,"Nume \u0219i prenume"),i(),r(21,"input",25,2),_("ngModelChange",function(m){return c(l),h(t.user.numePrenume,m)||(t.user.numePrenume=m),u(m)}),i(),g(23,Ct,2,0,"span",22),i()(),r(24,"div",18)(25,"div",19)(26,"label",26),s(27,"Matricola"),i(),r(28,"input",27,3),_("ngModelChange",function(m){return c(l),h(t.user.matricola,m)||(t.user.matricola=m),u(m)}),i(),g(30,vt,2,0,"span",22),i()(),g(31,bt,7,4,"div",28)(32,yt,8,5,"div",28),i(),r(33,"div",17)(34,"div",18)(35,"div",29)(36,"label",30),s(37,"Firma"),i(),r(38,"select",31),_("ngModelChange",function(m){return c(l),h(t.user.idFirma,m)||(t.user.idFirma=m),u(m)}),w("ngModelChange",function(m){return c(l),u(t.firmaChanged(m))}),r(39,"option",32),s(40,"Selecta\u021Bi firma"),i(),g(41,Et,2,2,"option",33),i()(),r(42,"div",29)(43,"label",34),s(44,"Loca\u021Bie"),i(),r(45,"select",35,4),_("ngModelChange",function(m){return c(l),h(t.user.idLocatie,m)||(t.user.idLocatie=m),u(m)}),r(47,"option",36),s(48,"Selecta\u021Bi Loca\u021Bia"),i(),g(49,Mt,2,2,"option",33),i()()(),r(50,"div",18)(51,"div",19)(52,"label",37),s(53,"Post"),i(),r(54,"select",38,5),_("ngModelChange",function(m){return c(l),h(t.user.idPost,m)||(t.user.idPost=m),u(m)}),r(56,"option",36),s(57,"Selecta\u021Bi Postul"),i(),g(58,xt,2,2,"option",33),i()()(),r(59,"div",18)(60,"div",19)(61,"label",39),s(62,"Compartiment"),i(),r(63,"select",40,6),_("ngModelChange",function(m){return c(l),h(t.user.idCompartiment,m)||(t.user.idCompartiment=m),u(m)}),r(65,"option",36),s(66,"Selecta\u021Bi Compartimentul"),i(),g(67,It,2,2,"option",33),i()()(),r(68,"div",18)(69,"div",19)(70,"label",41),s(71,"Rol"),i(),r(72,"select",42,7),_("ngModelChange",function(m){return c(l),h(t.user.idRol,m)||(t.user.idRol=m),u(m)}),g(74,Ut,2,2,"option",33),i()()(),r(75,"div",18)(76,"div",19)(77,"label",43),s(78,"Manager direct"),i(),r(79,"select",44,8),_("ngModelChange",function(m){return c(l),h(t.user.idSuperior,m)||(t.user.idSuperior=m),u(m)}),r(81,"option",36),s(82,"Selecta\u021Bi Superiorul"),i(),g(83,Tt,2,2,"option",33),i()()()()(),r(84,"div",45)(85,"div",46)(86,"cancel-button",47),w("click",function(){return c(l),u(t.onCancel())}),i()(),r(87,"div",46),b(88,"save-button",48),i()()()()()()}if(e&2){let l=y(7),a=y(15),m=y(22),v=y(29);d(4),p("ngIf",!t.isEditMode),d(),p("ngIf",t.isEditMode),d(9),E("invalid",(a.touched||a.dirty)&&a.invalid),f("ngModel",t.user.username),d(2),p("ngIf",(a.touched||a.dirty)&&a.invalid),d(5),E("invalid",(m.touched||m.dirty)&&m.invalid),f("ngModel",t.user.numePrenume),d(2),p("ngIf",(m.touched||m.dirty)&&m.invalid),d(5),E("invalid",(v.touched||v.dirty)&&v.invalid),f("ngModel",t.user.matricola),d(2),p("ngIf",(v.touched||v.dirty)&&v.invalid),d(),p("ngIf",!t.isEditMode),d(),p("ngIf",!t.isEditMode),d(6),f("ngModel",t.user.idFirma),p("disabled",t.loggedInUserHasFirma),d(),p("value",0),d(2),p("ngForOf",t.ddFirmeSelectionList),d(4),f("ngModel",t.user.idLocatie),d(4),p("ngForOf",t.ddLocatii),d(5),f("ngModel",t.user.idPost),d(4),p("ngForOf",t.ddPosturi),d(5),f("ngModel",t.user.idCompartiment),d(4),p("ngForOf",t.ddCompartimente),d(5),f("ngModel",t.user.idRol),d(2),p("ngForOf",t.ddRoluri),d(5),f("ngModel",t.user.idSuperior),d(4),p("ngForOf",t.ddUseri),d(5),p("disabled",!l.valid)}},dependencies:[B,T,K,Y,Z,V,X,L,Q,$,D,J,ee,te],encapsulation:2})}};ge=I([F({checkProperties:!0})],ge);function Ft(o,n){o&1&&(r(0,"h3"),s(1,"\xCEnregistrare Utilizator (utilizator nou)"),i())}function Vt(o,n){o&1&&(r(0,"h3"),s(1,"Modificare date Utilizator"),i())}function Lt(o,n){o&1&&(r(0,"span",49),s(1,"C\xE2mpul este obligatoriu!"),i())}function Dt(o,n){o&1&&(r(0,"span",49),s(1,"C\xE2mpul este obligatoriu!"),i())}function Wt(o,n){o&1&&(r(0,"span",49),s(1,"C\xE2mpul este obligatoriu!"),i())}function Bt(o,n){o&1&&(r(0,"span",49),s(1,"C\xE2mpul este obligatoriu!"),i())}function At(o,n){if(o&1){let e=M();r(0,"div",18)(1,"div",19)(2,"label",50),s(3,"Parola"),i(),r(4,"input",51,9),_("ngModelChange",function(l){c(e);let a=C();return h(a.user.password,l)||(a.user.password=l),u(l)}),i(),g(6,Bt,2,0,"span",22),i()()}if(o&2){let e=y(5),t=C();d(4),E("invalid",(e.touched||e.dirty)&&e.invalid),f("ngModel",t.user.password),d(2),p("ngIf",(e.touched||e.dirty)&&e.invalid)}}function Nt(o,n){o&1&&(r(0,"span",49),s(1,"C\xE2mpul este obligatoriu!"),i())}function kt(o,n){o&1&&(r(0,"span",49),s(1,"Parolele introduse nu sunt identice!"),i())}function Rt(o,n){if(o&1){let e=M();r(0,"div",18)(1,"div",19)(2,"label",52),s(3,"Confirm\u0103 Parola"),i(),r(4,"input",53,10),_("ngModelChange",function(l){c(e);let a=C();return h(a.user.confirmPassword,l)||(a.user.confirmPassword=l),u(l)}),i(),g(6,Nt,2,0,"span",22)(7,kt,2,0,"span",22),i()()}if(o&2){let e=y(5),t=C();d(4),E("invalid",(e.touched||e.dirty)&&e.invalid),f("ngModel",t.user.confirmPassword),d(2),p("ngIf",(e.touched||e.dirty)&&e.invalid),d(),p("ngIf",t.errorPassword)}}function jt(o,n){if(o&1&&(r(0,"option",32),s(1),i()),o&2){let e=n.$implicit;p("value",e.Value),d(),x("",e.Text," ")}}function Ot(o,n){if(o&1&&(r(0,"option",32),s(1),i()),o&2){let e=n.$implicit;p("value",e.Id),d(),x("",e.Text," ")}}function zt(o,n){if(o&1&&(r(0,"option",32),s(1),i()),o&2){let e=n.$implicit;p("value",e.Id),d(),x("",e.Text," ")}}function qt(o,n){if(o&1&&(r(0,"option",32),s(1),i()),o&2){let e=n.$implicit;p("value",e.Id),d(),x("",e.Text," ")}}function Ht(o,n){if(o&1&&(r(0,"option",32),s(1),i()),o&2){let e=n.$implicit;p("value",e.Id),d(),x("",e.Text," ")}}function Gt(o,n){if(o&1&&(r(0,"option",32),s(1),i()),o&2){let e=n.$implicit;p("value",e.Id),d(),x("",e.Text," ")}}var fe=class xe{constructor(n,e,t,l,a,m){this.ddStateService=n,this.userService=e,this.toastr=t,this.firmeService=l,this.router=a,this.route=m,this.errorPassword=!1,this.isEditMode=!0,this.loggedInUserHasFirma=!1,this.firmeSub=this.firmeService.firmeSelections$.subscribe(v=>{this.ddFirmeSelectionList=v}),this.ddSub=this.ddStateService.appDropdownsSubject$.subscribe(v=>{this.ddLocatii=v?.DdLocatii,this.ddPosturi=v?.DdPosturi,this.ddCompartimente=v?.DdCompartimente,this.ddUseri=v?.DdUseri,this.ddRoluri=v?.DdRoluri,this.allDdLocatii=v?.DdLocatii,this.allDdPosturi=v?.DdPosturi,this.allDdCompartimente=v?.DdCompartimente,this.allddUseri=v?.DdUseri})}ngOnInit(){this.user={},this.route.params.subscribe(n=>{this.userId=+n.id,this.userService.get(this.userId).subscribe(e=>{this.user=e,this.filterDropdowns(e?.idFirma)})})}onSubmit(){this.userEdit=Te({},this.user),this.userService.updateUserData(this.userEdit).subscribe({next:()=>{this.toastr.success("Datele utilizatorului au fost modificate cu succes!"),setTimeout(()=>{this.router.navigate(["../../"],{relativeTo:this.route})},500)}})}onCancel(){this.router.navigate(["../../"],{relativeTo:this.route})}firmaChanged(n){this.filterDropdowns(n)}filterDropdowns(n){n&&(this.ddCompartimente=this.allDdCompartimente.filter(e=>e.IdFirma===+n),this.ddLocatii=this.allDdLocatii.filter(e=>e.IdFirma===+n),this.ddPosturi=this.allDdPosturi.filter(e=>e.IdFirma===+n),this.ddUseri=this.allddUseri.filter(e=>e.IdFirma===+n))}static{this.\u0275fac=function(e){return new(e||xe)(S(de),S(A),S(O),S(q),S(k),S(N))}}static{this.\u0275cmp=U({type:xe,selectors:[["user-edit"]],standalone:!1,decls:89,vars:31,consts:[["registerForm","ngForm"],["username","ngModel"],["numePrenume","ngModel"],["matricola","ngModel"],["idLocatie","ngModel"],["idPost","ngModel"],["idCompartiment","ngModel"],["idRol","ngModel"],["idSuperior","ngModel"],["password","ngModel"],["confirmPassword","ngModel"],[1,"container"],[1,"row"],[1,"row","p-3","border",2,"font-size","small"],[1,"col-12","text-center","p-4","border-bottom"],[4,"ngIf"],[3,"ngSubmit"],[1,"col-6","pt-4"],[1,"row","mb-3"],[1,"col-md-12"],["for","usr-create-edit-username",1,"required-label"],["type","text","id","usr-create-edit-username","name","username","required","",1,"form-control",3,"ngModelChange","ngModel"],["class","help-block help-block-danger",4,"ngIf"],[1,"col-ms-12"],["for","usr-create-edit-numePrenume",1,"required-label"],["type","text","id","usr-create-edit-numePrenume","name","numePrenume","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","usr-create-edit-matricola",1,"required-label"],["type","text","id","usr-create-edit-matricola","name","matricola","required","",1,"form-control",3,"ngModelChange","ngModel"],["class","row mb-3",4,"ngIf"],[1,"col-md-6"],["for","loc-firma"],["id","ddFilter","name","ddFilter",1,"form-select",3,"ngModelChange","ngModel","disabled"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["for","usr-create-edit-locatie"],["id","usr-create-edit-locatie","name","idLocatie",1,"form-select",3,"ngModelChange","ngModel"],["value",""],["for","usr-create-edit-post"],["id","usr-create-edit-post","name","idPost",1,"form-select",3,"ngModelChange","ngModel"],["for","usr-create-edit-compartiment"],["id","usr-create-edit-compartiment","name","idCompartiment",1,"form-select",3,"ngModelChange","ngModel"],["for","usr-create-edit-rol"],["id","usr-create-edit-rol","name","idRol",1,"form-select",3,"ngModelChange","ngModel"],["for","usr-create-edit-superior"],["id","usr-create-edit-superior","name","idSuperior",1,"form-select",3,"ngModelChange","ngModel"],[1,"row","pt-3"],[1,"col-6"],[3,"click"],[3,"disabled"],[1,"help-block","help-block-danger"],["for","usr-create-edit-password",1,"required-label"],["type","password","id","usr-create-edit-password","name","password","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","usr-create-edit-confirmPassword",1,"required-label"],["type","password","id","usr-create-edit-confirmPassword","name","confirmPassword","required","",1,"form-control",3,"ngModelChange","ngModel"]],template:function(e,t){if(e&1){let l=M();r(0,"div",11)(1,"div",12)(2,"div",13)(3,"div",14),g(4,Ft,2,0,"h3",15)(5,Vt,2,0,"h3",15),i(),r(6,"form",16,0),w("ngSubmit",function(){return c(l),u(t.onSubmit())}),r(8,"div",12)(9,"div",17)(10,"div",18)(11,"div",19)(12,"label",20),s(13,"Email"),i(),r(14,"input",21,1),_("ngModelChange",function(m){return c(l),h(t.user.username,m)||(t.user.username=m),u(m)}),i(),g(16,Lt,2,0,"span",22),i()(),r(17,"div",18)(18,"div",23)(19,"label",24),s(20,"Nume \u0219i prenume"),i(),r(21,"input",25,2),_("ngModelChange",function(m){return c(l),h(t.user.numePrenume,m)||(t.user.numePrenume=m),u(m)}),i(),g(23,Dt,2,0,"span",22),i()(),r(24,"div",18)(25,"div",19)(26,"label",26),s(27,"Matricola"),i(),r(28,"input",27,3),_("ngModelChange",function(m){return c(l),h(t.user.matricola,m)||(t.user.matricola=m),u(m)}),i(),g(30,Wt,2,0,"span",22),i()(),g(31,At,7,4,"div",28)(32,Rt,8,5,"div",28),i(),r(33,"div",17)(34,"div",18)(35,"div",29)(36,"label",30),s(37,"Firma"),i(),r(38,"select",31),_("ngModelChange",function(m){return c(l),h(t.user.idFirma,m)||(t.user.idFirma=m),u(m)}),w("ngModelChange",function(m){return c(l),u(t.firmaChanged(m))}),r(39,"option",32),s(40,"Selecta\u021Bi firma"),i(),g(41,jt,2,2,"option",33),i()(),r(42,"div",29)(43,"label",34),s(44,"Loca\u021Bie"),i(),r(45,"select",35,4),_("ngModelChange",function(m){return c(l),h(t.user.idLocatie,m)||(t.user.idLocatie=m),u(m)}),r(47,"option",36),s(48,"Selecta\u021Bi Loca\u021Bia"),i(),g(49,Ot,2,2,"option",33),i()()(),r(50,"div",18)(51,"div",19)(52,"label",37),s(53,"Post"),i(),r(54,"select",38,5),_("ngModelChange",function(m){return c(l),h(t.user.idPost,m)||(t.user.idPost=m),u(m)}),r(56,"option",36),s(57,"Selecta\u021Bi Postul"),i(),g(58,zt,2,2,"option",33),i()()(),r(59,"div",18)(60,"div",19)(61,"label",39),s(62,"Compartiment"),i(),r(63,"select",40,6),_("ngModelChange",function(m){return c(l),h(t.user.idCompartiment,m)||(t.user.idCompartiment=m),u(m)}),r(65,"option",36),s(66,"Selecta\u021Bi Compartimentul"),i(),g(67,qt,2,2,"option",33),i()()(),r(68,"div",18)(69,"div",19)(70,"label",41),s(71,"Rol"),i(),r(72,"select",42,7),_("ngModelChange",function(m){return c(l),h(t.user.idRol,m)||(t.user.idRol=m),u(m)}),g(74,Ht,2,2,"option",33),i()()(),r(75,"div",18)(76,"div",19)(77,"label",43),s(78,"Manager direct"),i(),r(79,"select",44,8),_("ngModelChange",function(m){return c(l),h(t.user.idSuperior,m)||(t.user.idSuperior=m),u(m)}),r(81,"option",36),s(82,"Selecta\u021Bi Superiorul"),i(),g(83,Gt,2,2,"option",33),i()()()()(),r(84,"div",45)(85,"div",46)(86,"cancel-button",47),w("click",function(){return c(l),u(t.onCancel())}),i()(),r(87,"div",46),b(88,"save-button",48),i()()()()()()}if(e&2){let l=y(7),a=y(15),m=y(22),v=y(29);d(4),p("ngIf",!t.isEditMode),d(),p("ngIf",t.isEditMode),d(9),E("invalid",(a.touched||a.dirty)&&a.invalid),f("ngModel",t.user.username),d(2),p("ngIf",(a.touched||a.dirty)&&a.invalid),d(5),E("invalid",(m.touched||m.dirty)&&m.invalid),f("ngModel",t.user.numePrenume),d(2),p("ngIf",(m.touched||m.dirty)&&m.invalid),d(5),E("invalid",(v.touched||v.dirty)&&v.invalid),f("ngModel",t.user.matricola),d(2),p("ngIf",(v.touched||v.dirty)&&v.invalid),d(),p("ngIf",!t.isEditMode),d(),p("ngIf",!t.isEditMode),d(6),f("ngModel",t.user.idFirma),p("disabled",t.loggedInUserHasFirma),d(),p("value",0),d(2),p("ngForOf",t.ddFirmeSelectionList),d(4),f("ngModel",t.user.idLocatie),d(4),p("ngForOf",t.ddLocatii),d(5),f("ngModel",t.user.idPost),d(4),p("ngForOf",t.ddPosturi),d(5),f("ngModel",t.user.idCompartiment),d(4),p("ngForOf",t.ddCompartimente),d(5),f("ngModel",t.user.idRol),d(2),p("ngForOf",t.ddRoluri),d(5),f("ngModel",t.user.idSuperior),d(4),p("ngForOf",t.ddUseri),d(5),p("disabled",!l.valid)}},dependencies:[B,T,K,Y,Z,V,X,L,Q,$,D,J,ee,te],encapsulation:2})}};fe=I([F({checkProperties:!0})],fe);var $e=(()=>{class o{constructor(e){this.httpClient=e,this.baseUrl=z.baseUrl}addAdmin(){return this.httpClient.get(this.baseUrl+"/UserDbSetup/addAdmin")}updateUserDataFromImport24(){return this.httpClient.get(this.baseUrl+"/UserDbSetup/import24")}setHiearchy(){return this.httpClient.get(this.baseUrl+"/UserDbSetup/setHierarchy")}addIdFirmaToEvaluareCompetente(){return this.httpClient.get(this.baseUrl+"/UserDbSetup/addIdFirmaToEvaluareCompetente")}static{this.\u0275fac=function(t){return new(t||o)(ae(le))}}static{this.\u0275prov=ne({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();function Kt(o,n){o&1&&b(0,"mat-spinner")}function Xt(o,n){o&1&&b(0,"mat-spinner")}var he=class Ie{constructor(n){this.userDbSetupService=n,this.updateUserTableInProgress=!1,this.updateUserHierarchyInProgress=!1,this.usesOldUserTalbe=!1,this.usesOldUserTalbe=z.usesOldUserTalbe}ngOnInit(){}addIdFirmaToEvaluareTable(){this.addIdFirmaToEvaluareTableSub=this.userDbSetupService.addIdFirmaToEvaluareCompetente().subscribe(n=>{this.message=n?.message})}addAdmin(){this.addAdminSub=this.userDbSetupService.addAdmin().subscribe(()=>{this.message="Utilizatorul admin a fost adaugat cu succes"})}updateUserTable(){this.updateUserTableInProgress=!0,this.updateUserTableSub=this.userDbSetupService.updateUserDataFromImport24().subscribe(()=>{this.message="Tabela noua de Utilizatori a fost populata",this.updateUserTableInProgress=!1})}setUserHierarchy(){this.updateUserHierarchyInProgress=!0,this.updateUserTableHierarchySub=this.userDbSetupService.setHiearchy().subscribe(()=>{this.message="Ierarhia a fost setata",this.updateUserHierarchyInProgress=!1})}static{this.\u0275fac=function(e){return new(e||Ie)(S($e))}}static{this.\u0275cmp=U({type:Ie,selectors:[["app-user-db-setup"]],standalone:!1,decls:36,vars:5,consts:[[1,"row"],[1,"col-12","text-center","p-4"],[2,"background-color","rgb(114, 174, 114)"],[1,"conatiner"],["type","button","mat-raised-button","","color","primary",3,"click"],["color","basic","fontIcon","save"],["type","button","mat-raised-button","","color","primary",3,"click","disabled"],[4,"ngIf"]],template:function(e,t){e&1&&(r(0,"div",0)(1,"div",1)(2,"h3"),s(3,"In aceasta pagina se pot rula scripturile urmatoare:"),i(),r(4,"h6",2),s(5),i()()(),r(6,"div",3)(7,"ol")(8,"li")(9,"h6"),s(10,"Adaugare Id Firma in tabela Evaluare Competente:"),i(),r(11,"button",4),w("click",function(){return t.addIdFirmaToEvaluareTable()}),b(12,"mat-icon",5),s(13," \xA0 Adaugare IdFirma "),i()(),r(14,"li")(15,"h6"),s(16,'Adaugare utilizator admin: (cu nume: "admin@mail.com" si parola: "abcd"):'),i(),r(17,"button",4),w("click",function(){return t.addAdmin()}),b(18,"mat-icon",5),s(19," \xA0 Adaugare Administrator "),i()(),b(20,"hr"),r(21,"li")(22,"h6"),s(23,"Copierea tuturor utiliatorilor din AspNetUsers in noua tabela de Utilizatori:"),i(),r(24,"button",6),w("click",function(){return t.updateUserTable()}),b(25,"mat-icon",5),s(26," \xA0 Copiere utilizatori in tabela noua "),i(),g(27,Kt,1,0,"mat-spinner",7),i(),b(28,"hr"),r(29,"li")(30,"h6"),s(31,"Setarea ierarhiei utilizatorilor in noua tabela de Utilizatori:"),i(),r(32,"button",6),w("click",function(){return t.setUserHierarchy()}),b(33,"mat-icon",5),s(34," \xA0 Setarea ierarhiei "),i(),g(35,Xt,1,0,"mat-spinner",7),i()()()),e&2&&(d(5),P(t.message),d(19),p("disabled",t.updateUserTableInProgress),d(3),p("ngIf",t.updateUserTableInProgress),d(5),p("disabled",t.updateUserHierarchyInProgress),d(3),p("ngIf",t.updateUserHierarchyInProgress))},dependencies:[T,H,G,ie],encapsulation:2})}};he=I([F({checkProperties:!0})],he);var et=(()=>{class o{constructor(e){this.httpClient=e,this.baseUrl=z.baseUrl}exortEvaluariToPdfAndExcel(e){return this.httpClient.get(this.baseUrl+"/ExportEvaluari/all?anul="+e)}exortEvaluariToPdfAndExcelForAngajatiBetween(e,t,l){let a=new We;return a=a.append("idStart",t),a=a.append("idStop",l),a=a.append("anul",e||""),this.httpClient.get(this.baseUrl+"/ExportEvaluari/between",{params:a})}static{this.\u0275fac=function(t){return new(t||o)(ae(le))}}static{this.\u0275prov=ne({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();function Zt(o,n){if(o&1&&(r(0,"option",12),s(1),i()),o&2){let e=n.$implicit;p("value",e),d(),P(e)}}function $t(o,n){o&1&&b(0,"mat-spinner")}var _e=class Ue{constructor(n){this.exportRapoarteService=n,this.years=Array.from({length:50},(e,t)=>2022+t),this.isWritingFiles=!1}generateRaportPdfSiExcel(){this.isWritingFiles=!0,this.generateRapEvalSub=this.exportRapoarteService.exortEvaluariToPdfAndExcel(this.anul).pipe(Se(this)).subscribe({next:n=>{this.isWritingFiles=!1,this.successMessage=n?.raspuns},error:n=>{this.errorMessage=n,this.isWritingFiles=!1}})}generateRaportPdfSiExcelBetween(){this.isWritingFiles=!0,this.generateRapEvalSub=this.exportRapoarteService.exortEvaluariToPdfAndExcelForAngajatiBetween(this.anul,this.idAngajatStart,this.idAngajatStop).pipe(Se(this)).subscribe({next:n=>{this.isWritingFiles=!1,this.successMessage=n?.raspuns},error:n=>{this.errorMessage=n,this.isWritingFiles=!1}})}static{this.\u0275fac=function(e){return new(e||Ue)(S(et))}}static{this.\u0275cmp=U({type:Ue,selectors:[["export-evaluari"]],standalone:!1,decls:39,vars:9,consts:[[1,"conatiner"],[1,"row","mb-2"],[1,"col-sm-2"],["name","anul",1,"form-select",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"mb-3"],["type","button","mat-raised-button","","color","primary",3,"click","disabled"],["color","basic","fontIcon","save"],[1,"d-flex","align-items-end","gap-3"],["type","number","id","eport_eval-idAngStart","name","idAngajatStart",1,"form-control","form-control-sm",3,"ngModelChange","ngModel"],["type","number","id","port_eval-idAngStop","name","idAngajatStop",1,"form-control","form-control-sm",3,"ngModelChange","ngModel"],[4,"ngIf"],[3,"value"]],template:function(e,t){e&1&&(r(0,"div",0)(1,"div",1)(2,"h5"),s(3,"Generare Rapoarte PDF Evaluare \u0219i concluzii"),i()(),r(4,"div",1)(5,"label"),s(6,"Anul"),i(),r(7,"div",2)(8,"select",3),_("ngModelChange",function(a){return h(t.anul,a)||(t.anul=a),a}),g(9,Zt,2,2,"option",4),i()()(),r(10,"ol")(11,"li",5)(12,"h5"),s(13,"pentru to\u021Bi angaja\u021Bii"),i(),r(14,"button",6),w("click",function(){return t.generateRaportPdfSiExcel()}),b(15,"mat-icon",7),s(16," \xA0 Generare Rapoarte "),i()(),r(17,"li",5)(18,"h5"),s(19,"pentru angaja\u021Bii cu id-ul \xEEntre cele 2 valori"),i(),r(20,"div",8)(21,"div")(22,"label"),s(23,"Id Angajat Start"),i(),r(24,"input",9),_("ngModelChange",function(a){return h(t.idAngajatStart,a)||(t.idAngajatStart=a),a}),i()(),r(25,"div")(26,"label"),s(27,"Id Angajat Stop"),i(),r(28,"input",10),_("ngModelChange",function(a){return h(t.idAngajatStop,a)||(t.idAngajatStop=a),a}),i()(),r(29,"button",6),w("click",function(){return t.generateRaportPdfSiExcelBetween()}),b(30,"mat-icon",7),s(31," \xA0 Generare Rapoarte "),i()()()(),r(32,"div",2),g(33,$t,1,0,"mat-spinner",11),i(),r(34,"div",1)(35,"span"),s(36),i(),r(37,"span"),s(38),i()()()),e&2&&(d(8),f("ngModel",t.anul),d(),p("ngForOf",t.years),d(5),p("disabled",t.isWritingFiles),d(10),f("ngModel",t.idAngajatStart),d(4),f("ngModel",t.idAngajatStop),d(),p("disabled",t.isWritingFiles),d(4),p("ngIf",t.isWritingFiles),d(3),P(t.successMessage),d(2),P(t.errorMessage))},dependencies:[B,T,Y,Z,V,pe,X,L,D,H,G,ie],encapsulation:2})}};_e=I([F()],_e);var ei=[{path:"",component:ue},{path:"add",component:ge},{path:"edit/:id",component:fe},{path:"changePassword/:id",component:R},{path:"userDbSetup",component:he},{path:"export-evaluari",component:_e}],tt=(()=>{class o{static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275mod=se({type:o})}static{this.\u0275inj=oe({imports:[ve.forChild(ei),ve]})}}return o})();var nr=(()=>{class o{static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275mod=se({type:o})}static{this.\u0275inj=oe({imports:[qe,Oe,tt]})}}return o})();export{nr as UserModule};
