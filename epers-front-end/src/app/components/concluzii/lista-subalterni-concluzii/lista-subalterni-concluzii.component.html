<div class="row">
  <div class="col-12 text-center p-4">
    <h3>Listă Subalterni Concluzii</h3>
  </div>
</div>
<div class="row p-2 border-rounded">
  <router-outlet></router-outlet>

  @if (!idFirmaLoggedInUser) {
    <table-header [currentPage]="currentPage" [pages]="pages" [itemsPerPage]="itemsPerPage" (nextPage)="nextPage($event)"
      (previousPage)="previousPage($event)" (lastPage)="lastPage($event)"
      (selectItemsPerPage)="changeItemsPerPage($event)" (serachFilter)="filter($event)"
      [searchCriteria]="filtru ? filtru: 'Nume, Prenume, Matricola'" [ddFilterList]="ddFirme" [ddFilterVisible]="true"
      (serachIdDDFilter)="filterFirma($event)" ddFilterCriteria="Firma">
    </table-header>
  }

  @if (idFirmaLoggedInUser) {
    <table-header [currentPage]="currentPage" [pages]="pages" [itemsPerPage]="itemsPerPage" (nextPage)="nextPage($event)"
      (previousPage)="previousPage($event)" (lastPage)="lastPage($event)"
      (selectItemsPerPage)="changeItemsPerPage($event)" (serachFilter)="filter($event)"
      [searchCriteria]="filtru ? filtru : 'Nume, Prenume, Matricola'">
    </table-header>
  }

  <table class="table p-3 table-striped table-bordered">
    <thead class="table-header">
      <tr class="table-info">
        <th>Nume și prenume</th>
        <th>Matricolă angajat</th>
        <th>Post angajat</th>
        <th>COR angajat</th>
        <th>Data ultimei evaluări</th>
        <th>Evaluare finalizată</th>
        <th>Concluzii</th>
        <th>Istoric Concluzii</th>
      </tr>
    </thead>
    <tbody>
      @for (subalern of listaSubalterni; track subalern) {
        <tr>
          <td>{{subalern.numePrenume}}</td>
          <td>{{subalern.matricolaAngajat}}</td>
          <td>{{subalern.postAngajat}}</td>
          <td>{{subalern.cor}}</td>
          <td>{{subalern.dataUltimaEval}}</td>
          <td style="text-align: center;">
            @if (subalern.flagFinalizat) {
              <mat-icon color="primary" fontIcon="check"></mat-icon>
            }
            @if (!subalern.flagFinalizat) {
              <mat-icon color="warn" fontIcon="close"></mat-icon>
            }
          </td>
          <td>
            <div class="text-center">
              <button type="button" mat-raised-button color="primary"
                [routerLink]="['/concluzii/add', subalern.idAngajat]" [disabled]="!subalern.dataEvalFin">
                <mat-icon color="basic" fontIcon="edit"></mat-icon>
                Adăugați
              </button>
            </div>
          </td>
          <td>
            <div class="text-center">
              <button type="button" mat-stroked-button color="primary"
                [routerLink]="['/concluzii/istoric', subalern.idAngajat]">
                <mat-icon color="basic" fontIcon="history"></mat-icon>
                Istoric
              </button>
            </div>
          </td>
        </tr>
      }
    </tbody>
  </table>
</div>